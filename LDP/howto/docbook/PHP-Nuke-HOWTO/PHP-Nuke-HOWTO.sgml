<!DOCTYPE book  PUBLIC "-//OASIS//DTD DocBook V4.1//EN"
 [ <!entity index SYSTEM "index.sgml">
<!ENTITY % output.print.png "INCLUDE">
<!ENTITY % output.print.pdf "IGNORE">
<!ENTITY % output.print.eps "IGNORE">
<!ENTITY % output.print.bmp "IGNORE">

<!ENTITY graph1001 "logo1">
<!ENTITY graph1002 "logo2">
<!ENTITY graph1003 "homepage">
<!ENTITY graph1004 "category">
<!ENTITY graph1005 "downloads">
<!ENTITY graph1006 "private_messages">
<!ENTITY graph1007 "search">
<!ENTITY graph1008 "stats">
<!ENTITY graph1009 "your_account">
<!ENTITY graph1010 "snapshot8">
<!ENTITY graph1011 "snapshot9">
<!ENTITY graph1012 "snapshot11">
<!ENTITY graph1013 "snapshot12">
<!ENTITY graph1014 "myadmin1">
<!ENTITY graph1015 "myadmin2">
<!ENTITY graph1016 "myadmin3">
<!ENTITY graph1017 "myadmin4">
<!ENTITY graph1018 "myadmin5">
<!ENTITY graph1019 "snapshot15">
<!ENTITY graph1020 "snapshot16">
<!ENTITY graph1021 "snapshot17">
<!ENTITY graph1022 "myadmin1">
<!ENTITY graph1023 "snapshot19">
<!ENTITY graph1024 "snapshot20">
<!ENTITY graph1025 "snapshot21">
<!ENTITY graph1026 "snapshot22"><!ENTITY lyxarrow "-&gt;">
 ]>

<book lang="en"><!-- DocBook file was created by LyX 1.2
  See http://www.lyx.org/ for more information -->
<bookinfo><title>PHP-Nuke: Management and Programming</title><authorgroup>
<author>   
<firstname>Claudio</firstname>     <surname>Erba</surname> 
<affiliation> 
<jobtitle>Webmaster</jobtitle>    
  <orgname>www.spaghettibrain.com</orgname>   
 </affiliation>  
</author>
<othercredit role="converter">
<contrib>Conversion from LyX to DocBook SGML, Index generation</contrib>
<firstname>Chris</firstname> <surname>Karakas</surname>
<affiliation>www.karakas-online.de</affiliation>
</othercredit>
<othercredit role="translator">
<contrib>Translation from italian and translation project coordination</contrib>
<firstname>Andre</firstname> <surname>Purfield</surname>
<affiliation>oss.cs-consultants.com</affiliation>
</othercredit>
<othercredit role="translator">
<contrib>Translation from italian: chapters 7, 8 and 9</contrib>
<firstname>Fortunato</firstname> <surname>Matarazzo</surname>
</othercredit>
<othercredit role="translator">
<contrib>Translation from italian: chapters 1-6, 10-11</contrib>
<firstname>Chris</firstname> <surname>Karakas</surname>
<affiliation>www.karakas-online.de</affiliation>
</othercredit>
</authorgroup>
<keywordset>
<keyword>PHP-Nuke</keyword>
<keyword>programming</keyword>
<keyword>management</keyword>
<keyword>tutorial</keyword>
<keyword>PHP</keyword>
<keyword>MySQL</keyword>
<keyword>Linux</keyword>
<keyword>structure</keyword>
<keyword>news</keyword>
<keyword>content management system</keyword>
<keyword>CMS</keyword>
<keyword>UNIX</keyword>
<keyword>nuke</keyword>
<keyword>modules</keyword>
<keyword>blocks</keyword>
<keyword>topics</keyword>
<keyword>themes</keyword>
<keyword>architecture</keyword>
<keyword>howto</keyword>
<keyword>guide</keyword>
<keyword>content</keyword>
<keyword>download</keyword>
<keyword>book</keyword>
</keywordset>
<abstract><para>
   <mediaobject>
      <![ %output.print.png; [
      <imageobject>
         <imagedata fileref="./images/&graph1001;.png" format="PNG">
      </imageobject>
      ]]>
      <![ %output.print.pdf; [
      <imageobject>
         <imagedata fileref="&graph1001;.pdf" format="PDF" scale="65">
      </imageobject>
      ]]>
      <![ %output.print.eps; [
      <imageobject>
         <imagedata fileref="&graph1001;.eps" format="EPS">
      </imageobject>
       ]]>
      <![ %output.print.bmp; [
      <imageobject>
         <imagedata fileref="&graph1001;.bmp" format="BMP">
      </imageobject>
       ]]>
      <textobject>
         <phrase>Figure</phrase>
      </textobject>
   </mediaobject></para><para>
   <mediaobject>
      <![ %output.print.png; [
      <imageobject>
         <imagedata fileref="./images/&graph1002;.png" format="PNG">
      </imageobject>
      ]]>
      <![ %output.print.pdf; [
      <imageobject>
         <imagedata fileref="&graph1002;.pdf" format="PDF" scale="65">
      </imageobject>
      ]]>
      <![ %output.print.eps; [
      <imageobject>
         <imagedata fileref="&graph1002;.eps" format="EPS">
      </imageobject>
       ]]>
      <![ %output.print.bmp; [
      <imageobject>
         <imagedata fileref="&graph1002;.bmp" format="BMP">
      </imageobject>
       ]]>
      <textobject>
         <phrase>Figure</phrase>
      </textobject>
   </mediaobject></para><para>There has always been the necessity to have a definitive guide on PHP-Nuke. This tutorial describes the installation and structure of PHP-Nuke and the details of customizing the front end to suit the users' needs. The architecture of PHP-Nuke, with its modules, blocks, topics and themes is presented in detail, as well as the interplay of PHP and MySQL for the creation of a mighty content management system (CMS).It also delves into more advanced issues, like the programming of PHP-Nuke blocks and modules.</para></abstract><REVHISTORY>
<REVISION>
<REVNUMBER>1.2
</REVNUMBER>
<DATE>2003-05-29
</DATE>
<AUTHORINITIALS>CK
</AUTHORINITIALS>
<REVREMARK>New logo, CSS stylesheet, HTML validation, footer icons. Incorporated LDP reviewer's comments. Created Aknowledgements and Availability of sources sections.
</REVREMARK>
</REVISION>
<REVISION>
<REVNUMBER>1.1
</REVNUMBER>
<DATE>2003-02-13
</DATE>
<AUTHORINITIALS>AP
</AUTHORINITIALS>
<REVREMARK>Cleaned up the wording and a few typos.
</REVREMARK>
</REVISION>
<REVISION>
<REVNUMBER>1.0
</REVNUMBER>
<DATE>2003-01-09
</DATE>
<AUTHORINITIALS>CK
</AUTHORINITIALS>
<REVREMARK>First complete version.
</REVREMARK>
</REVISION>
</REVHISTORY>
</bookinfo>
<chapter id="terms"><title>Terms of distribution</title><sect1 id="disclaimer"><title>Disclaimer</title><para>No liability<indexterm><primary>liability</primary></indexterm> for the contents of this documents can be accepted. Use the concepts, examples and other content at your own risk. As this is a new edition of this document, there may be errors and inaccuracies, that may of course be damaging to your system. Proceed with caution, and although this is highly unlikely, the author does not take any responsibility for that.</para><para>All copyrights are held by their respective owners, unless specifically noted otherwise. Use of a term in this document should not be regarded as affecting the validity of any trademark or service mark.</para><para>Naming of particular products or brands should not be seen as endorsements.</para></sect1>
<sect1 id="formats"><title>Formats</title><para>This document is available in the following formats:</para><itemizedlist><listitem><para><ulink url="./book1.html">HTML (HyperText Markup Language)</ulink><indexterm><primary>HTML (HyperText Markup Language)</primary></indexterm>, many HTML files (one for every section)</para></listitem><listitem><para><ulink url="./EN-Book.html">HTML (HyperText Markup Language)</ulink><indexterm><primary>HTML (HyperText Markup Language)</primary></indexterm>, one big HTML file</para></listitem><listitem><para><ulink url="./EN-Book.txt">TXT (ASCII Text)</ulink><indexterm><primary>TXT (ASCII Text)</primary></indexterm></para></listitem><listitem><para><ulink url="./EN-Book.rtf">RTF (Rich Text Format)</ulink><indexterm><primary>RTF (Rich Text Format)</primary></indexterm></para></listitem><listitem><para><ulink url="./EN-Book.pdf">PDF (Portable Document Format)</ulink><indexterm><primary>PDF (Portable Document Format)</primary></indexterm></para></listitem><listitem><para><ulink url="./EN-Book.ps.gz">PS.GZ (Compressed Postscript)</ulink><indexterm><primary>PS.GZ (Compressed Postscript)</primary></indexterm></para></listitem><listitem><para><ulink url="./EN-Book.sgml">SGML (Standard Generalized Markup Language)</ulink><indexterm><primary>SGML (Standard Generalized Markup Language)</primary></indexterm></para></listitem><listitem><para><ulink url="./EN-Book.lyx">LYX (LaTeX frontend LyX)</ulink><indexterm><primary>LYX (LaTeX frontend LyX)</primary></indexterm></para></listitem></itemizedlist><important>
<title>IMPORTANT: Downloads for offline reading!</title>
<para>
If you want to download the HTML or RTF formats for offline reading, you will need to download the images as well - PNG for HTML and BMP for RTF, including the callouts! To save you the hassle, I have compiled the following zipped tar archives for offline reading:
</para>
</important>
<itemizedlist><listitem><para><ulink url="./EN-Book-html.tar.gz"> TAR.GZ (Compressed TAR Archive), many HTML files with images</ulink></para></listitem><listitem><para><ulink url="./EN-Book-onehtml.tar.gz"> TAR.GZ (Compressed TAR Archive), one big  HTML file with images</ulink></para></listitem><listitem><para><ulink url="./EN-Book-sgml.tar.gz"> TAR.GZ (Compressed TAR Archive), SGML file with images</ulink></para></listitem><listitem><para><ulink url="./EN-Book-rtf.tar.gz"> TAR.GZ (Compressed TAR Archive), RTF file with images</ulink></para></listitem></itemizedlist><para>A tarball containing all the above formats, including images, is also available:</para><itemizedlist><listitem><para><ulink url="./EN-Book.tar.gz"> TAR.GZ (Compressed TAR Archive), All files</ulink><indexterm><primary>TAR.GZ (Compressed TAR Archive)</primary></indexterm></para></listitem></itemizedlist></sect1>
<sect1 id="licence"><title>Licence</title><para>Permission is granted to copy, distribute and/or modify this document under the terms of the GNU Free Documentation License<indexterm><primary> GNU Free Documentation License</primary></indexterm>, Version 1.1 or any later version published by the Free Software Foundation<indexterm><primary>Free Software Foundation</primary></indexterm>; with no Invariant Sections, with no Front-Cover Texts, and with no Back-Cover Texts. A copy of the license can be found at the <ulink url="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License</ulink> .</para><para>&quot;Original version of Claudio Erba (webmaster@spaghettibrain.com), <ulink url="www.spaghettibrain.com ">spaghettibrain</ulink>, PHP-Nuke italian Mirror, 2002. This book, in all its versions (also those modified from third parties in Italian or whichever), for will of the author, may be reproduced also integrally without violating any law in asmuch as this book is released under <ulink url="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License</ulink></para><para>This book:</para><itemizedlist><listitem><para>May be modified partially or integrally creating manuals for companies, agencies or persons who deal with formatting changing either the diagram or the contents or the pagination.</para></listitem><listitem><para>May be distributed either in its original or in modified form, or either in electronic or in paper format from either field periodicals or not, Internet sites and whichever other medium.</para></listitem><listitem><para>May be used as internal manual by companies, public or private agencies, or universities .</para></listitem><listitem><para>May be used distributed by universities as a hand-out.</para></listitem><listitem><para>May even be resold without having to recognize any type of royalty to the author or authors on the condition that the purchasers be granted the freedom of making even integral copies, redistribute or resell them.</para></listitem></itemizedlist></sect1>
<sect1 id="availability-of-sources"><title>Availability of sources</title><para>The modifiable sources of the original book (in italian), the images and example files are available in sxi format (OpenOffice Impress) on <ulink url="www.spaghettibrain.com">spaghettibrain</ulink>. Openoffice is an office suite completely free, downloadable from <ulink url="openoffice">www.openoffice.org</ulink>. </para><para>See <xref linkend="formats"> for the modifiable sources of this document. These are the official versions. We (the translators and current maintainers) plan to continue work on this document and add new chapters and enhancements. If you want to see the version we are currently working on (the &quot;bleeding edge&quot; version), check <ulink url="http://www.karakas-online.de/EN-Book/">http://www.karakas-online.de/EN-Book/</ulink> from time to time.</para></sect1>
<sect1 id="aknowledgements"><title>Aknowledgements</title><para>Since I am still at the very start of this work here, I cannot claim to have carried out this operation to its end, but, as the saying says, those who have started, are already halfways </para><para>The following people contribute, directly or indirectly to this project and their help is hereby kindly aknowledged:</para><itemizedlist><listitem><para>Francisco Burzi with all the introductory scripts, found in the files of installation of PHP-Nuke</para></listitem><listitem><para>Vasco Clergy and his daughter Valentina of Lug Rieti for the translations of the modules of the handbook</para></listitem><listitem><para>Micaela bechini, for the daily translations of <ulink url="http://phpnuke.oeg">phpnuke.org</ulink> from English.</para></listitem><listitem><para>The communities of <ulink url="http://www.splatt.it">Splatt.it</ulink>, <ulink url="http://www.nukeitalia.com">Nukeitalia.com</ulink>, <ulink url="http://www.phpnuke.it">PHPnuke.it</ulink> (and its Mailing List), <ulink url="http://www.postnuke.it">Postnuke.it</ulink>, <ulink url="http://www.envolution.it">envolution.it</ulink>, <ulink url="http://www.xoops.it">xoops.it</ulink> and obviously the 1500 registered users of <ulink url="www.spaghettibrain.com">spaghettibrain</ulink>.</para></listitem><listitem><para>Aemmenet, in the person of Mark Atzori that has granted us free use of the server on which <ulink url="www.spaghettibrain.com">spaghettibrain</ulink> is accommodated.</para></listitem><listitem><para>Roberto Scano of IWA Italy and Patrizia Bertini of <ulink url="http://www.webaccessibile.org">Webaccessibile.org</ulink> for the contributions on usability, accessibility and <ulink url="http://www.w3c.org">W3C</ulink> validation.</para></listitem><listitem><para>Marcello Tansini of <ulink url="http://www.webmasterpoint.org">webmasterpoint.org</ulink> for the support given to the project in terms of visibility.</para></listitem><listitem><para>Andrea Birgahi, the best PHP-Nuke Theme Maker of the world for the diagram of <ulink url="www.spaghettibrain.com">spaghettibrain</ulink>, for the logo of the book and a lot more.</para></listitem><listitem><para>My girl Sara for all...</para></listitem><listitem><para>My mother Lella, my sister Cora, my dog Grey and the newly arrived baby dog Maya.</para></listitem></itemizedlist><blockquote><para>This book I dedicate it to my Papà Antonio. Hello Pà.</para></blockquote><para>Some quotes have been taken from the installation files of <ulink url="http://phpnuke.oeg">phpnuke.org</ulink>.</para><para>The translators would like to thank the <ulink url="http://www.tldp.org">Linux Documentation Project (TLDP)</ulink> and its reviewers, especially Tabatha Marshall and Greg Ferguson for their comments and efforts to make this document available from TLDP's plattform to a wider audience.</para><para>We are in search of available volunteers to translate this script in as many languages as possible. In the case you are interested in translating this book, write to <ulink url="mailto:webmaster@spaghettibrain.com">webmaster@spaghettibrain.com</ulink>, <ulink url="mailto:chris@karakas-online.de">chris@karakas-online.de</ulink> or visit the site that will have a classified section dedicated to this argument.</para></sect1>
</chapter>
<chapter id="introduction"><title>Introduction to PHP-Nuke</title><sect1 id="purpose"><title>Purpose</title><para>This book is born as a &quot;thank you&quot; to all the users who visit <ulink url="www.spaghettibrain.com">spaghettibrain</ulink>. There has always been the necessity to have a definitive guide on PHP-Nuke, possibly in Italian language. Due to time constraints, nobody has ever had the will to carry out this operation.</para></sect1>
<sect1 id="whatis-phpnuke"><title>What Is PHP-Nuke</title><para>PHP-Nuke<indexterm><primary>PHPNuke</primary></indexterm> is free software, released under the <ulink url="http://www.gnu.org/licenses/licenses.html">GNU  License</ulink>.</para><para>It is a CMS (Content Managment System)<indexterm><primary>CMS (Content Managment System)</primary></indexterm> that integrates in its inside all the instruments that are used to create a site/portal of information (meant in broad sense). Given the immense number of present functions in the installation and in an even greater quantity of modules developed from third parties, the system is also adept to the management of</para><itemizedlist><listitem><para>Intranet<indexterm><primary>Intranet</primary></indexterm> business, </para></listitem><listitem><para>e-commerce<indexterm><primary>e-commerce</primary></indexterm> systems, </para></listitem><listitem><para>corporate portals<indexterm><primary>portals</primary></indexterm> , </para></listitem><listitem><para>public agencies, </para></listitem><listitem><para>news agencies, </para></listitem><listitem><para>online companies, </para></listitem><listitem><para>information sites,</para></listitem><listitem><para>e-learning systems </para></listitem><listitem><para>and so on...</para></listitem></itemizedlist><para>PHP-Nuke utilizes as hinge of its own structure the duo <ulink url="http://www.php.net">PHP</ulink><indexterm><primary>PHP</primary></indexterm>+ <ulink url="http://www.mysql.org">MySQL</ulink>, very often being accompanied by the <ulink url="http://www.apache.org">Apache</ulink><indexterm><primary>Apache</primary></indexterm> web server. Many modules have integrated many other languages, such as Javascript, Java, Flash and also even systems that serve, through the portal, sounds and films in streaming mode(Online Radio, TV Online, Images, Files...)</para><para>PHP-Nuke is developed with a particular eye to the suggestions of the <ulink url="http://www.w3c.org">W3C</ulink>, in its origin, the code is in fact W3C<indexterm><primary>W3C</primary></indexterm> compliant and one has validated both the code and the style sheets. It is then up to the user who intends to create a portal to adhere to these standards during the modification of the graphics or the intrinsic characteristics of the system.</para><para>The personalisation either of the graphical, or of the programming part has only a single limit, the fantasy and capability of the programer and web designer.The presence of many PHP-Nuke sites similar to each other is due mainly to the lack of time of those who created them or the fear that the phase of personalisation is too difficult on a technical level. In fact, it suffices to let oneself be inspired by the available themes, in order to realize how easy it is to sew a new dress to onIt is s portal.</para><para>Francisco Burzi, father and mother of PHP-Nuke, describes his creation as follows:</para><blockquote><para>PHP-Nuke is a Web Portal System, storytelling software, News system, online community or whatever you want to call it. The goal of PHP-Nuke is to have an automated web site to distribute news and articles with users system. Each user can submit comments to discuss the articles, just similar to Slashdot and many others. </para><para>Main features include: web based admin, surveys, top page, access stats page with counter, user customizable box, themes manager for registered users, friendly administration GUI with graphic topic manager, option to edit or delete stories, option to delete comments, moderation system, Referers page to know who link us, sections manager, customizable HTML blocks, user and authors edit, an integrated Banners Ads system, search engine, backend/headlines generation (RSS/RDF format), and many, many more friendly functions.</para><para>PHP-Nuke is written 100&percnt; in PHP and requires Apache Web server, PHP and a SQL (MySQL, mSQL, PostgreSQL, ODBC, ODBC_Adabas, Sybase or Interbase). Support for 25 languages, Yahoo like search engine, Comments option in Polls, lot of themes, Ephemerids manager, File Manager, Headlines, download manager, faq manager, advanced blocks systems, reviews system, newsletter, categorized articles, multilanguage content management and a lot more.</para></blockquote></sect1>
<sect1 id="history"><title>Short history of PHP-Nuke</title><para>Francisco Burzi<indexterm><primary>Burzi, Francisco</primary></indexterm>, describes the history of PHP-Nuke as follows:</para><blockquote><para>PHP-Nuke is a free software, released under the <ulink url="http://www.gnu.org/licenses/licenses.html">GNU  GPL License</ulink>, version 2.0. PHP-Nuke is the result of many years administrating a news site called <ulink url="http://linuxpreview.org">Linux Preview</ulink>. First, around August 1998, I wrote my own code in Perl called NUKE and used it for about 1 year, then my site grew big, so I needed a more powerfull system and decided to use Slash, the same used in the <ulink url="http://www.slashdot.org">Slashdot</ulink><indexterm><primary>Slashdot</primary></indexterm> site. It's good, but you realy need to know Perl to modify it, need too many modules, need to load a damn daemon that sucks all your CPU power. My Pentium III just appears to be a 386 each minute the daemon make its work.</para><para>Well, then I discovered Thatware, a good project to have a news site under PHP. I learned PHP in less than a week and began modifying it. There are too many mods to mention, it was practicaly a rewrite. I added some cool stuff, deleted some others and after more than 380 hours of hard work in 3 weeks! PHP-Nuke was born.</para><para>On August 17, 2000 I sold LinuxPreview.org to LinuxAlianza.com and now I have all the time to dedicate to the development of PHP-Nuke.</para><para>From January 2001 to January 2002, PHP-Nuke has been financially supported by MandrakeSoft, the folks that made Mandrake Linux. This gave me and PHP-Nuke a lot of oxygen and made possible a lot of stuff.</para><para>Now, I'm alone with this killer project. There is a lot of help from the people that use and develop modules and themes. Now, <ulink url="http://phpnuke.oeg">phpnuke.org</ulink> is a big site with a lot of users and helpful information for any user around the world. There are also strong users community sites in almost any language you can imagine. Just go to <ulink url="http://phpnuke.oeg">phpnuke.org</ulink> and enjoy this great community! </para></blockquote></sect1>
<sect1 id="communities"><title>The Nuke Communities</title><para>A careful look is due to the true value of PHP-Nuke, that is the communities<indexterm><primary>communities</primary></indexterm> that you will find all around. Thanks to the voluntary job of these persons, of these sites, PHP-Nuke has become a well-known system and it is always thanks to them that PHP-Nuke is a multilanguage system that supports more than 25 languages. </para><para>Even the modules have been created mostly from developers in external communities and have, in second round, been included in new distributions of PHP-Nuke. </para><para>There are communities out there who are solely devoted to the creation of new graphical themes of PHP-Nuke, to technical support, file mirroring as well as a real lot of multilingual communities that take care of their members informing them in their local language, thus creating new personal ties and more focused projects. </para><itemizedlist><listitem><para><ulink url="http://www.nukeforums.com">Nukeforums.com</ulink>: Technical support to PHP-Nuke</para></listitem><listitem><para><ulink url="http://www.nukedownloads.com">Nukedownloads.com</ulink>: File mirror for downloads</para></listitem><listitem><para><ulink url="http://www.somara.com">Somara.com</ulink>: Themes and graphics</para></listitem><listitem><para><ulink url="http://www.nukethemes.com">Nukethemes.com</ulink>: Themes and graphics</para></listitem><listitem><para><ulink url="http://www.ecomjunk.com">Ecomjunk.com</ulink>: Addons and modules</para></listitem><listitem><para><ulink url="http://www.nukeaddn.com">Nukeaddn.com</ulink>: Addons and modules</para></listitem></itemizedlist><para>Communities in Italian language: </para><itemizedlist><listitem><para><ulink url="http://www.spaghettibrain.com">Spaghettibrain.com</ulink></para></listitem><listitem><para><ulink url="http://www.phpnuke.it">PHPnuke.it</ulink></para></listitem><listitem><para><ulink url="http://www.splatt.it">Splatt.it</ulink></para></listitem><listitem><para><ulink url="http://www.nukeitalia.com">Nukeitalia.com</ulink></para></listitem></itemizedlist><para>Thanks to the work of these portals and single persons we have more than 500 different modules that may be used to personalize our portal, from the weather one to the e-commerce, the gallery of images to the chat realized in flash to the videogames in Java included in the layout of PHP-Nuke. Projects of particular interest are: <ulink url="http://www.splatt.it">Splatt.it</ulink> (Forum for PHP-Nuke), PHP Proxima<ulink url="http://www.phpproxima.it">PHP Proxima</ulink> (visual management of the layout of PHP-Nuke). </para></sect1>
<sect1 id="whyphpnuke"><title>Why use PHP-Nuke and not static HTML pages</title><itemizedlist><listitem><para>Because managing large sites with only static HTML pages is dangerous for your health.</para></listitem><listitem><para>Because through the dynamic pages, users can interact (Forum, chat)</para></listitem><listitem><para>Because through the dynamic pages we can offer value added services (restricted areas, various services based on user classification...) </para></listitem><listitem><para>Because the information is more easily catalogued.</para></listitem><listitem><para>Because with a few PHP pages we recall a lot of information.</para></listitem><listitem><para>Because keeping the contents up-to-date does not demand particular technical expertise and can be managed by anyone (by Davis Batistes).</para></listitem><listitem><para>It is the simplest way to to pull over a complete portal, thanks to its open source engine, it allows anyone to implement new modules or to modify and to personalize existing modules. (by Micione, <ulink url="http://www.vizzani.net">www.vizzani.net</ulink>)</para></listitem><listitem><para>It is very intuitive and easy to learn (by Anonymous)</para></listitem><listitem><para>It is  easy to modify by those who intend to personalize the program (By Arus)</para></listitem><listitem><para>It is  easy to use by the lesser experts among us.</para></listitem></itemizedlist></sect1>
</chapter>
<chapter id="frontend"><title>Front end structure: user view</title><para>In this chapter we will occupy ourselves, in detail, with all the functionalities implemented in PHP-Nuke, that is what our portal system can do and how. We will do this from the part of the visitor, imagining that we are the one who visits our site and uses its functionality. </para><para>We will analyze all the preinstalled modules in the PHP-Nuke <indexterm><primary>PHPNuke</primary></indexterm> distribution and will give a look also at some very interesting modules that still have not been included in the official distribution. </para><para>Before starting, we should spend two words on how PHP-Nuke is structured; this system is structured as a 3 column portal, the two lateral ones including the blocks, the central one displaying the function modules. This does not mean to say that the structure of our site cannot be modified completely. The initial skeleton is, favorably, the one to start from in order to create a super personalized portal. Beyond the 3 columns mentioned we have also a header (top of page) and a footer (bottom of page). </para><variablelist><varlistentry><term>Blocks:
</term><listitem><para>they are present in the left/right columns of our portal<footnote><para>In fact, a way exists to personalize the visualization of the blocks based on the page in which they are displayed to us, for example, in module news we see both the left and the right block, in module search instead, we see only the blocks on the left. </para></footnote> and deliver functions that are repeated in all pages of the site (e.g. the menu, banner and login blocks).</para></listitem></varlistentry><varlistentry><term>Modules:
</term><listitem><para>They are the heart of the page, they appear in the center column and each one has its own function. For example the news module delivers the articles, the search module makes an internal search of our site - they should be imagined as independent pages. They are the &quot;heart&quot; of the page that we visit (see <xref linkend="fig-homepage">). 

<figure id="fig-homepage">
   <title>
   PHP-Nuke Homepage
   </title>
   <mediaobject>
      <![ %output.print.png; [
      <imageobject>
         <imagedata fileref="./images/&graph1003;.png" format="PNG">
      </imageobject>
      ]]>
      <![ %output.print.pdf; [
      <imageobject>
         <imagedata fileref="&graph1003;.pdf" format="PDF" scale="65">
      </imageobject>
      ]]>
      <![ %output.print.eps; [
      <imageobject>
         <imagedata fileref="&graph1003;.eps" format="EPS">
      </imageobject>
       ]]>
      <![ %output.print.bmp; [
      <imageobject>
         <imagedata fileref="&graph1003;.bmp" format="BMP">
      </imageobject>
       ]]>
      <textobject>
         <phrase>PHP-Nuke Homepage</phrase>
      </textobject>
      <caption>
         <para>PHP-Nuke Homepage</para>
      </caption>
   </mediaobject>
</figure>
</para></listitem></varlistentry></variablelist><sect1 id="preinstalled-modules"><title>The preinstalled modules</title><variablelist><varlistentry><term>news<indexterm><primary>news</primary></indexterm>:
</term><listitem><para>Born  as the heart of PHP-Nuke, it was the obligatory Home Page in previous versions. In the last versions it is instead possible to define which modules should appear as the default page. 
The News module expands its branches on more pages. The first one we see is a collection of the latest News published (it is possible , from the configuration panel &lsqb;admin&lyxarrow;preferences&rsqb; to choose the number of latest news to be displayed, say 5, 10, 15, 20, 25, 30). In the main page only a small initial text of the news article is published. If the text is too large, it will be possible to read it whole by pressing the link &quot;Read more&quot;. 
The article module has many elements that distinguish it from other ones. In the first place, the title, the topic, that is the main category and is usually characterized by an image that, if clicked, brings up a selection of the articles that belong to this topic. We have a second way to classify the articles, which is to assign them a category they are supposed to belong (see <xref linkend="fig-category">) 

<figure id="fig-category">
   <title>
   Classifying articles
   </title>
   <mediaobject>
      <![ %output.print.png; [
      <imageobject>
         <imagedata fileref="./images/&graph1004;.png" format="PNG">
      </imageobject>
      ]]>
      <![ %output.print.pdf; [
      <imageobject>
         <imagedata fileref="&graph1004;.pdf" format="PDF" scale="65">
      </imageobject>
      ]]>
      <![ %output.print.eps; [
      <imageobject>
         <imagedata fileref="&graph1004;.eps" format="EPS">
      </imageobject>
       ]]>
      <![ %output.print.bmp; [
      <imageobject>
         <imagedata fileref="&graph1004;.bmp" format="BMP">
      </imageobject>
       ]]>
      <textobject>
         <phrase>Classifying articles</phrase>
      </textobject>
      <caption>
         <para>Classifying articles</para>
      </caption>
   </mediaobject>
</figure>
</para></listitem></varlistentry></variablelist><important>
<title>IMPORTANT</title>
<para>
This category is NOT a subcategory of topics, but rather a cross-sectional category that is completely independent from topics. Probably its most important function is to distinguish between "articles" and other admin-defined classes of news for which it will be possible to NOT be automatically published on the start page. "Articles" will always appear on the start news page.
</para>
</important>
<para>For example, imagine a portal that talks about soccer and it has 3 topics: </para><itemizedlist><listitem><para>League A</para></listitem><listitem><para>League B</para></listitem><listitem><para>League C</para></listitem></itemizedlist><para>We could think of cross-sectional categories like: </para><itemizedlist><listitem><para>Championship</para></listitem><listitem><para>Champions League</para></listitem><listitem><para>Soccer player market </para></listitem></itemizedlist><para>We can have an article that talks about League A/Championship, or of the Soccer player market League B. Clicking o topic, say League A, we will have a selection of all the articles that talk about League A, clicking on the category, Soccer player market, will have a selection of the articles that independently talk about soccer market that independently of the League being A, B or C. </para><para>At the bottom of the article we find more information about the article: who inserted it, when &amp; how many times it has been read etc.</para><important>
<para>
The counter is incremented only if the "Read more" link has been clicked. The counter does not increment unless the user clicks "Read more".
</para>
</important>
<para>It displays how many more bytes are still to be read, if there have been any comments on the article and what score has been given to the article by the readers. It is also possible to print the article in a printer-friendly format or you can send the link via e-mail to a friend.</para><para>Clicking on &quot; Read all &quot; brings us to the page that contains the entire article and the comments pertaining to it. In this page the user can read the entire article and interact with it through a multitude of operations.</para><para>He/She can cast a vote for the article, thus expressing a judgement on its validity, can comment on the article or answer to comments inserted from other users, can follow the links associated with this article, display it in a printer-friendly format and send the link via e-mail to a friend. You can also attach a survey to the article.</para><variablelist><varlistentry><term><anchor id="AvantGO">AvantGO<indexterm><primary>AvantGO</primary></indexterm>:
</term><listitem><para>It is  a very simplified version of the news archive, cretated mainly from the need to visit the page via a Palm Pilot. AvantGO is a system for archiving and visualizing the pages on palmtop screens due to the fact the Palm Pilot has a very small screen and has a low resolution (and even a low bandwidth connection) so they require simplified pages.</para></listitem></varlistentry><varlistentry><term>Downloads<indexterm><primary>Downloads Module</primary></indexterm>&nbsp;Module:
</term><listitem><para>This module is deeply branched and manages a file archive (present on our own or a third party site) offering the user various modes of interaction (see <xref linkend="fig-downloads">).

<figure id="fig-downloads">
   <title>
   Downloads module
   </title>
   <mediaobject>
      <![ %output.print.png; [
      <imageobject>
         <imagedata fileref="./images/&graph1005;.png" format="PNG">
      </imageobject>
      ]]>
      <![ %output.print.pdf; [
      <imageobject>
         <imagedata fileref="&graph1005;.pdf" format="PDF" scale="65">
      </imageobject>
      ]]>
      <![ %output.print.eps; [
      <imageobject>
         <imagedata fileref="&graph1005;.eps" format="EPS">
      </imageobject>
       ]]>
      <![ %output.print.bmp; [
      <imageobject>
         <imagedata fileref="&graph1005;.bmp" format="BMP">
      </imageobject>
       ]]>
      <textobject>
         <phrase>Downloads module</phrase>
      </textobject>
      <caption>
         <para>Downloads module</para>
      </caption>
   </mediaobject>
</figure>
</para></listitem></varlistentry></variablelist><para>In the main page it is possible to use an internal search engine that searches for keywords among all the files cataloged. There is also the possibility to add external links to a file (these files will not be added immediately, but put in a waiting list until an administrator will approve them and they become visible). We can also base our selection on which files were downloaded most, or which ones obtained the highest score. On this page we can have a list of categories that accompany the files (there may exist subcategories but in <xref linkend="fig-downloads"> there is only 1 category, &quot;Linux Downloads&quot;), the user is recognized when he/she views the downloads section after their first visit so if new downloads have been added since the last visit, the corresponding category will be have a &quot;new&quot; icon beside it.</para><para>Once we have entered the desired section, we can download the files that interest us, cast a judgment vote, report a nonexistent link to the administrator or see more information regarding the author of the file.</para><para>The file list may be ordered by insertion date, judgment or popularityy (files downloaded most).</para><variablelist><varlistentry><term>Feedback<indexterm><primary>Feedback</primary></indexterm>:
</term><listitem><para>Allows the user to send feedback and contact the webmaster of the site. The user just fills in the appropriate fields which are &quot;Name&quot;, &quot;E-Mail&quot; and then the &quot;Message Text&quot;. The system will then format an e-mail message that will arrive to the webmaster of the site.</para></listitem></varlistentry><varlistentry><term>Member&nbsp;List<indexterm><primary>Member List</primary></indexterm>:
</term><listitem><para>It displays all the users registered on the site. It is  possible to select the users on the basis of their basic information fields (name, nickname, personal homepage and e-mail address). It is  also possible to obtain a complete list of all the users and to order it by real name, e-mail address or homepage.</para></listitem></varlistentry><varlistentry><term>Private&nbsp;messages<indexterm><primary>Private messages</primary></indexterm>:
</term><listitem><para>All the registered users have access to an internal messaging system, thus being able to exchange messages with each other. In the login box of each user the number of messages that are archived for this user will be displayed, and there is a management functionality allowing for replies or deletions (see <xref linkend="fig-private-messages">).

<figure id="fig-private-messages">
   <title>
   Private messages
   </title>
   <mediaobject>
      <![ %output.print.png; [
      <imageobject>
         <imagedata fileref="./images/&graph1006;.png" format="PNG">
      </imageobject>
      ]]>
      <![ %output.print.pdf; [
      <imageobject>
         <imagedata fileref="&graph1006;.pdf" format="PDF" scale="65">
      </imageobject>
      ]]>
      <![ %output.print.eps; [
      <imageobject>
         <imagedata fileref="&graph1006;.eps" format="EPS">
      </imageobject>
       ]]>
      <![ %output.print.bmp; [
      <imageobject>
         <imagedata fileref="&graph1006;.bmp" format="BMP">
      </imageobject>
       ]]>
      <textobject>
         <phrase>Private messages</phrase>
      </textobject>
      <caption>
         <para>Private messages</para>
      </caption>
   </mediaobject>
</figure>
</para></listitem></varlistentry></variablelist><para>The message that we compose has various parts:</para><itemizedlist><listitem><para>The Recipient</para></listitem><listitem><para>The Subject </para></listitem><listitem><para>The animated icon that will accompany the subject of the message</para></listitem><listitem><para>The text that can be equipped with emoticons (emotional icons) and an aid for formatting the message in HTML adding Hyperlinks, emphasized words, bullet lists etc...</para></listitem></itemizedlist><variablelist><varlistentry><term>Recommend&nbsp;Us<indexterm><primary>Recommend us</primary></indexterm>:
</term><listitem><para>This module is so you can send an e-mail to a friend recommending visiting our PHP-Nuke site. The message that will be sent to the friend must be configured by the administrator.</para></listitem></varlistentry><varlistentry><term>Book&nbsp;Reviews<indexterm><primary>Books reviews</primary></indexterm>:
</term><listitem><para>This module serves as an archive of product/services/site reviews. The book review must be inserted by the administrator but also from a user (a book review will need , in this case, be accepted by the administrator) who, after inserting a short description of the product then may express his judgment assigning a score to it. It is also possible to insert a descriptive image. The book reviews are cataloged in alphabetical order and the selection can be made based on starting letter.</para></listitem></varlistentry><varlistentry><term>Search<indexterm><primary>Search module</primary></indexterm>&nbsp;Module:
</term><listitem><para>It is the main search engine for PHP-Nuke, it does full text searches on articles, comments, sections, users and book reviews (see <xref linkend="fig-search">). It is  possible to make multiple searches (e.g.. an article of a certain category written by a certain author).

<figure id="fig-search">
   <title>
   Search module
   </title>
   <mediaobject>
      <![ %output.print.png; [
      <imageobject>
         <imagedata fileref="./images/&graph1007;.png" format="PNG">
      </imageobject>
      ]]>
      <![ %output.print.pdf; [
      <imageobject>
         <imagedata fileref="&graph1007;.pdf" format="PDF" scale="65">
      </imageobject>
      ]]>
      <![ %output.print.eps; [
      <imageobject>
         <imagedata fileref="&graph1007;.eps" format="EPS">
      </imageobject>
       ]]>
      <![ %output.print.bmp; [
      <imageobject>
         <imagedata fileref="&graph1007;.bmp" format="BMP">
      </imageobject>
       ]]>
      <textobject>
         <phrase>Search module</phrase>
      </textobject>
      <caption>
         <para>Search module</para>
      </caption>
   </mediaobject>
</figure>
</para></listitem></varlistentry><varlistentry><term>Sections<indexterm><primary>Sections</primary></indexterm>:
</term><listitem><para>This module is a classification system like the topics. The articles inserted in this module do not appear in the news module, they can be displayed on more than one page and for this reason they are able to accommodate articles which are big in size. Every section can be associated with a different image. The article even provides a display system for printable pages.</para></listitem></varlistentry><varlistentry><term>Statistics<indexterm><primary>Statistics</primary></indexterm>:
</term><listitem><para>The statistics module provides basic statistical information regarding use of the site. The information varies from the total number of displayed pages , to the type of browser and operating system used, up to the number of users that are registered, the version of PHP-Nuke used etc...(see <xref linkend="fig-stats">)

<figure id="fig-stats">
   <title>
   Statistics module
   </title>
   <mediaobject>
      <![ %output.print.png; [
      <imageobject>
         <imagedata fileref="./images/&graph1008;.png" format="PNG">
      </imageobject>
      ]]>
      <![ %output.print.pdf; [
      <imageobject>
         <imagedata fileref="&graph1008;.pdf" format="PDF" scale="65">
      </imageobject>
      ]]>
      <![ %output.print.eps; [
      <imageobject>
         <imagedata fileref="&graph1008;.eps" format="EPS">
      </imageobject>
       ]]>
      <![ %output.print.bmp; [
      <imageobject>
         <imagedata fileref="&graph1008;.bmp" format="BMP">
      </imageobject>
       ]]>
      <textobject>
         <phrase>Statistics module</phrase>
      </textobject>
      <caption>
         <para>Statistics module</para>
      </caption>
   </mediaobject>
</figure>
</para></listitem></varlistentry><varlistentry><term>Stories&nbsp;archive<indexterm><primary>Stories archive</primary></indexterm>:
</term><listitem><para>Archives all the articles by month enabling a chronological consultation. After having chosen the month, the corresponding articles are displayed with small flags besides them, visualizing the language they were written. Also in this plane it is possible to see the article in printable format and to send it to a friend. An inner search engine is  also comprised as well as the display of details regarding the article, such as:</para></listitem></varlistentry></variablelist><itemizedlist><listitem><para>number of comments </para></listitem><listitem><para>number of readings </para></listitem><listitem><para>score</para></listitem></itemizedlist><variablelist><varlistentry><term>Submit&nbsp;news<indexterm><primary>Submit news</primary></indexterm>:
</term><listitem><para>The users or the simple visitors of the site can propose to the administrator an article that will then be examined and, if approved, published. The users do not have all the possibility of classification that the administrator does, in fact they can only decide the article's title, the topic, the language and the text. They cannot classify it or choose if it should appear in the Home Page or not. And they can neither decide to publish it on a temporary basis.</para></listitem></varlistentry><varlistentry><term>Surveys<indexterm><primary>Surveys</primary></indexterm>:
</term><listitem><para>Enables the administrator to create a survey that will later appear in a block or in the survey list. The users can vote on this survey (not more than once in 24 hours), and eventually comment. Moreover it is possible to display the list of the previous surveys and to consult their final results.</para></listitem></varlistentry><varlistentry><term>Top10<indexterm><primary>Top10</primary></indexterm>:
</term><listitem><para>It lists the top 10 active ones of all our portal.</para></listitem></varlistentry></variablelist><itemizedlist><listitem><para>10 most read articles</para></listitem><listitem><para>10 most commented articles</para></listitem><listitem><para>10 most active categories</para></listitem><listitem><para>10 most read articles in the special sections</para></listitem><listitem><para>10 most voted surveys</para></listitem><listitem><para>10 most active authors</para></listitem><listitem><para>10 most read book reviews</para></listitem><listitem><para>10most downloaded files</para></listitem><listitem><para>10 most read pages</para></listitem></itemizedlist><variablelist><varlistentry><term>Topics<indexterm><primary>Topics</primary></indexterm>:
</term><listitem><para>Lists the main categories of PHP-Nuke. Once we have entered this module, we will be able, by clicking on the corresponding icon of the topic we are interested in, to carry out a selection of articles and in automatic mode, to see all the articles corresponding to this topic. We are also presented with a small search interface to finish our search in the chosen context.</para></listitem></varlistentry><varlistentry><term>WebLinks<indexterm><primary>WebLinks</primary></indexterm>:
</term><listitem><para>It is  a collection of web links. This module has the exact same functionality as the Download module so there is no need to explain it any more. </para></listitem></varlistentry><varlistentry><term>Your&nbsp;Account<indexterm><primary>Your Account</primary></indexterm>:
</term><listitem><para>It's the administration console for your &quot;User Profile&quot; (It only works for registered users), the implemented functions are (see <xref linkend="fig-your-account">):</para></listitem></varlistentry></variablelist><itemizedlist><listitem><para>It changes your info: enables management of your profile by changing your E-mail, Where you're from, AIM, ICQ, Avatar &amp; Fake E-mail etc...</para></listitem><listitem><para>It changes your Home: It creates a personalized menu (as a block) for navigation, the user can put in there whatever he wants (tests, links, images).</para></listitem><listitem><para>Setup comments: Configures the display of comments, assigning display criteria .</para></listitem><listitem><para>Theme selection: Changes the theme of the site, allowing you to choose between all available themes.</para></listitem><listitem><para>Logout/Exit: It lets us exit from our current user profile, cancelling the cookie.

<figure id="fig-your-account">
   <title>
   Your account
   </title>
   <mediaobject>
      <![ %output.print.png; [
      <imageobject>
         <imagedata fileref="./images/&graph1009;.png" format="PNG">
      </imageobject>
      ]]>
      <![ %output.print.pdf; [
      <imageobject>
         <imagedata fileref="&graph1009;.pdf" format="PDF" scale="65">
      </imageobject>
      ]]>
      <![ %output.print.eps; [
      <imageobject>
         <imagedata fileref="&graph1009;.eps" format="EPS">
      </imageobject>
       ]]>
      <![ %output.print.bmp; [
      <imageobject>
         <imagedata fileref="&graph1009;.bmp" format="BMP">
      </imageobject>
       ]]>
      <textobject>
         <phrase>Your account</phrase>
      </textobject>
      <caption>
         <para>Your account</para>
      </caption>
   </mediaobject>
</figure>
</para></listitem></itemizedlist><para>We then have a main menu that informs us of how many and which comments we have inserted and how many stories we have published.</para><variablelist><varlistentry><term>Content<indexterm><primary>Content</primary></indexterm>:
</term><listitem><para>It is  a module that lists all the categories (cross-sectional arguments to the topics, do you remember?), that lists, in the first instance all the present categories and once the category is selected, it lists all enclosed articles emphasizing the publication language.</para></listitem></varlistentry><varlistentry><term>Encyclopedia<indexterm><primary>Encyclopedia</primary></indexterm>:
</term><listitem><para>It is  a system for creating one or more word dictionaries. In the first selection scheme it requires you to enter the dictionary (displaying even a small flag that indicates the language), after the click we are invited to choose the letter that corresponds to the searched word or to use the inner search engine of the encyclopedia, once found it's enough to click on the word to discover its meaning.</para></listitem></varlistentry><varlistentry><term>FAQ<indexterm><primary>FAQ</primary></indexterm>:
</term><listitem><para>It is  an archive of Questions/Answers divided by category that can be consulted by the user as a first solution to his problems. He can divide the Questions/Answers by category in order to facilitate the consultation.</para></listitem></varlistentry><varlistentry><term>FORUM<indexterm><primary>FORUM</primary></indexterm>:
</term><listitem><para>In version 5,6 - 6.0 of PHP-Nuke the Splatt forum is present. We still do not know if it will be integrated in successive versions to Nuke. I suggest to use it anyway, since it is a mature application and has an italian support comunity. The functionality implemented in this forum (on the user side) are many (see <xref linkend="fig-forum">), the forums are divided by category, have a dedicated inner search engine, users can associate to every post (participation in the forum) icons relating to the argument, cast a vote on a discussion, see various icons according to the degree of attention degree that a specific discussion has generated, see how many questions and answers a certain thread has received, see the profile of that user and many other functions...

<figure id="fig-forum">
   <title>
   Forum
   </title>
   <mediaobject>
      <![ %output.print.png; [
      <imageobject>
         <imagedata fileref="./images/&graph1010;.png" format="PNG">
      </imageobject>
      ]]>
      <![ %output.print.pdf; [
      <imageobject>
         <imagedata fileref="&graph1010;.pdf" format="PDF" scale="65">
      </imageobject>
      ]]>
      <![ %output.print.eps; [
      <imageobject>
         <imagedata fileref="&graph1010;.eps" format="EPS">
      </imageobject>
       ]]>
      <![ %output.print.bmp; [
      <imageobject>
         <imagedata fileref="&graph1010;.bmp" format="BMP">
      </imageobject>
       ]]>
      <textobject>
         <phrase>Forum</phrase>
      </textobject>
      <caption>
         <para>Forum</para>
      </caption>
   </mediaobject>
</figure>
</para></listitem></varlistentry></variablelist></sect1>
<sect1 id="non-installed-modules"><title>Other non-installed modules</title><variablelist><varlistentry><term>Indy&nbsp;News<indexterm><primary>Indy News</primary></indexterm>:
</term><listitem><para>very interesting module that manages the &quot;Attach&lyxarrow;File or Image&quot; &quot; function in every article. In fact, during the phase of an article insertion, it is possible to enclose the following:</para></listitem></varlistentry></variablelist><itemizedlist><listitem><para>Image: In this case, inserting a GIF or a JPEG will result in a preview in the Homepage (the module will display it on the left, on the right there will be the topics icon), then, by clicking on &quot;read all&quot; (only if other text is present), or the image itself, it will appear in its original size.</para></listitem><listitem><para>Other files: besides images it is possible to enclose also other files (for well-known filetypes, the corresponding icon wil appear in &quot;read all&quot;, for others there will be a default icon). It is important to remember, for the attached files, to add a text in the extende text section, otherwise it will be impossible to display the link link &quot;read all&quot; that displays in the footer of the article the icon with the file and download info. 
The system was originally an adaptation of the IndyNews module for PHP-Nuke, has been created by the webmaster of <ulink url="http://www.bergamoblog.it">bergamoblog.it</ulink> for version 5,5, for the version 5.6 of PHP-Nuke the adaptation was done by <ulink url="http://www.spaghettibrain.com">Spaghettibrain.com</ulink>.</para></listitem></itemizedlist><variablelist><varlistentry><term>Guestbook<indexterm><primary>Guestbook</primary></indexterm>:
</term><listitem><para>Allows the users to insert greeting messages (like a real guestbook), archiving their history in a way that, besides inserting new messages, it is possible to read all the messages of the other users too. Do not confuse it with the forum!</para></listitem></varlistentry><varlistentry><term>Chat<indexterm><primary>Chat</primary></indexterm>:
</term><listitem><para>There is a flash chat module that manages user's chatting in real time without the page refreshing. It is very interesting in that it comes with skins of various colors, thus giving the administrator the possibility to choose the one that is most suitable for the site.</para></listitem></varlistentry><varlistentry><term>Dmoz/ODP<indexterm><primary>DMOZ/ODP</primary></indexterm>:
</term><listitem><para>Integrates the Open Source search engine Dmoz/Open Directory Project to the inside the PHP-Nuke portal . It is  like having an integrated powerful motor like yahoo in your own graphics and pages.</para></listitem></varlistentry></variablelist></sect1>
<sect1 id="preinstalled-blocks"><title>The preinstalled blocks</title><variablelist><varlistentry><term>Advertising&nbsp;Block<indexterm><primary>Advertising Block</primary></indexterm>:
</term><listitem><para>From this release on we have the possibility to insert our banners also in the blocks (buttons various of dimensions) being managed as if it were our own circuiting banner, counting clicks, impressions etc...</para></listitem></varlistentry><varlistentry><term>Content<indexterm><primary>Content</primary></indexterm>:
</term><listitem><para>Displays the most active content.</para></listitem></varlistentry><varlistentry><term>Encyclopedia<indexterm><primary>Encyclopedia</primary></indexterm>:
</term><listitem><para>lists all active encyclopedias, clicking the link will bring us directly inside the list of terms of the chosen encyclopedia.</para></listitem></varlistentry><varlistentry><term>Forums<indexterm><primary>Forums</primary></indexterm>:
</term><listitem><para>The forums block lists the last 10 posted messages and a search engine that executes a query on all the posts of the forum.</para></listitem></varlistentry><varlistentry><term>Last&nbsp;5&nbsp;articles<indexterm><primary>Last 5 articles</primary></indexterm>:
</term><listitem><para>It lists the last 5 published articles offering information on how many readings and how many comments have been made.</para></listitem></varlistentry><varlistentry><term>Last&nbsp;10&nbsp;referers<indexterm><primary>Last 10 referers</primary></indexterm>:
</term><listitem><para>It lists the sites from which the last 10 visits have arrived.</para></listitem></varlistentry><varlistentry><term>Ephemerids<indexterm><primary>Ephemerids</primary></indexterm>:
</term><listitem><para>It is  a block that manages the recurrent events. It lists the events happened on the same date but in the previous years.</para></listitem></varlistentry><varlistentry><term>Reviews<indexterm><primary>Reviews</primary></indexterm>:
</term><listitem><para>It lists in a block the book reviews of the day.</para></listitem></varlistentry><varlistentry><term>Sections&nbsp;Articles<indexterm><primary>Sections Articles</primary></indexterm>:
</term><listitem><para>lists the active sections. Clicking one we will get to the corresponding article list.</para></listitem></varlistentry><varlistentry><term>Top&nbsp;10&nbsp;Downloads<indexterm><primary>Top 10 Downloads</primary></indexterm>:
</term><listitem><para>It lists the 10 most downloaded files.</para></listitem></varlistentry><varlistentry><term>Top&nbsp;10&nbsp;Links<indexterm><primary>Top 10 Links</primary></indexterm>:
</term><listitem><para>It lists the 10 most clicked links in the archives. </para></listitem></varlistentry></variablelist></sect1>
</chapter>
<chapter id="backend"><title>Back end structure: administrator view</title><para>The administration page is reached by calling the page admin.php<indexterm><primary>admin.php</primary></indexterm> (www.yoursite.com/admin.php) and carrying out the login procedure inserting your user and password. (Remember that the normal users should not login from the page admin.php but from the appropriate module).</para><para>Once logged in, the administrator finds an interface that lists all the areas which can be acted upon (see <xref linkend="fig-admin-panel">). If the administrator is a superadmin, he may work on all the areas of the site, if instead he is an administrator with limited powers he will see the links relative to the areas on which he is allowed to work. Through the preferences configuration we will be able to decide whether to display icons or just a textual interface. According to our choice either a textual or an icon administration interface will appear. <xref linkend="fig-admin-panel"> shows the interface with the icons,  as you can see.</para><para>
<figure id="fig-admin-panel">
   <title>
   Administration panel
   </title>
   <mediaobject>
      <![ %output.print.png; [
      <imageobject>
         <imagedata fileref="./images/&graph1011;.png" format="PNG">
      </imageobject>
      ]]>
      <![ %output.print.pdf; [
      <imageobject>
         <imagedata fileref="&graph1011;.pdf" format="PDF" scale="65">
      </imageobject>
      ]]>
      <![ %output.print.eps; [
      <imageobject>
         <imagedata fileref="&graph1011;.eps" format="EPS">
      </imageobject>
       ]]>
      <![ %output.print.bmp; [
      <imageobject>
         <imagedata fileref="&graph1011;.bmp" format="BMP">
      </imageobject>
       ]]>
      <textobject>
         <phrase>Administration panel</phrase>
      </textobject>
      <caption>
         <para>Administration panel</para>
      </caption>
   </mediaobject>
</figure>
</para><para>Remember that when you write new administration modules you must also create the corresponding icon, otherwise, when in visual administration mode, only the textual link corresponding to your module will appear and you won't be able to click it.</para><para>In order to set up the graphical administration mode you must go to the preferences section and set up in &quot;graphical options&quot; the &quot;graphical menu in administration&quot; option to &quot;yes&quot;.</para><sect1 id="administration-functions"><title>The administration functions</title><variablelist><varlistentry><term>Function&nbsp;&quot;add&nbsp;article&quot;:
</term><listitem><para>It is  the function that adds a new article to the News module. The options offered are many and will be analyzed here for one (see <xref linkend="fig-articles">):</para></listitem></varlistentry></variablelist><itemizedlist><listitem><para>Title<indexterm><primary>Title</primary></indexterm>: inserts the news title.</para></listitem><listitem><para>Topic<indexterm><primary>Argument</primary></indexterm>: Determines which Topic will be associated with the article.</para></listitem><listitem><para>Category<indexterm><primary>Category</primary></indexterm>:Determines which Category will be associated with the article.</para></listitem><listitem><para>Publish<indexterm><primary>Publish</primary></indexterm> in the Homepage: if this option is not selected, then the article will be displayed only in the topics or the relative categories and not in the main page of the news module .</para></listitem><listitem><para>Activate<indexterm><primary>Activate</primary></indexterm> comments: If it's not activated the users cannot comment on the article.</para></listitem><listitem><para>Language<indexterm><primary>Language</primary></indexterm>: If in the preferences we have activated the multilingual option, we will be asked in which language we will publish the article. (e.g. if I publish an article in english, I will see it displayed only if I click on the small english flag in the languages block and so on...).</para></listitem><listitem><para>Story Text<indexterm><primary>Short Text</primary></indexterm>: It is  the text that appears in the preview.</para></listitem><listitem><para>Extended Text<indexterm><primary>Extensive Text</primary></indexterm>: It is  the text that appears when we click on &quot;read all&quot;.</para></listitem><listitem><para>Programmed article<indexterm><primary>Programmed article</primary></indexterm>: The administrator is given the ability to choose when the article should be published, deciding on the publishing date and hour. It is not a neccesary function but it is very useful.</para></listitem><listitem><para>Preview<indexterm><primary>Preview</primary></indexterm> or send: Depending on the choice made here determines whether the article will be displayed in preview mode or directly published.</para></listitem><listitem><para>Survey<indexterm><primary>Survey</primary></indexterm>: It is possible to attach a survey to a specific article. In the case that this option is activated, when the reader clicks on &quot;read all&quot;, a survey block like the one shown in the screenshot will appear. 

<figure id="fig-articles">
   <title>
   Articles
   </title>
   <mediaobject>
      <![ %output.print.png; [
      <imageobject>
         <imagedata fileref="./images/&graph1012;.png" format="PNG">
      </imageobject>
      ]]>
      <![ %output.print.pdf; [
      <imageobject>
         <imagedata fileref="&graph1012;.pdf" format="PDF" scale="65">
      </imageobject>
      ]]>
      <![ %output.print.eps; [
      <imageobject>
         <imagedata fileref="&graph1012;.eps" format="EPS">
      </imageobject>
       ]]>
      <![ %output.print.bmp; [
      <imageobject>
         <imagedata fileref="&graph1012;.bmp" format="BMP">
      </imageobject>
       ]]>
      <textobject>
         <phrase>Articles</phrase>
      </textobject>
      <caption>
         <para>Articles</para>
      </caption>
   </mediaobject>
</figure>
</para></listitem></itemizedlist><variablelist><varlistentry><term>Function&nbsp;&quot;Backup&nbsp;DB<indexterm><primary>Backup DB</primary></indexterm>&quot;:
</term><listitem><para>It is  the function that allows us to create a backup file that contains both structure and content of the PHP-Nuke database. This is very useful in case our data gets lost. Once we click on &quot;Backup DB&quot;, we will have to wait for the server to create the file. Waiting time varies from a few seconds to some minutes in the case of a large database. Once created, we will be asked to download the file. Remember to keep your backup in a safe place!</para></listitem></varlistentry><varlistentry><term>Function&nbsp;&quot;Blocks<indexterm><primary>Blocks</primary></indexterm>&quot;:
</term><listitem><para>It's a very important function because it allows us to control the left and right columns of our portal. The scheme is presented with a list of the blocks that we have created, we can then activate, deactivate or edit them changing their position and order and assigning them permissions. We can in fact decide if a block should be visible by all, only by the registered users, or only the administrator. We can also make the block visible only in a specific language.</para></listitem></varlistentry></variablelist><note>
<title> Please note</title>
<para>
This info is also  present  in <xref linkend="blocks"> 
</para>
</note>
<para>The PHP-Nuke blocks can be of 3 different types:</para><itemizedlist><listitem><para>RSS<indexterm><primary>RSS</primary></indexterm>/RDF<indexterm><primary>RDF</primary></indexterm>: They are blocks that capture news from other sites that are put at our disposal, the files are in a standard format suitable for reading the text contained in them. (For example the site <ulink url="http://www.spaghettibrain.com">Spaghettibrain.com</ulink> gives news to other sites).</para></listitem><listitem><para>Blocks of content: They are blocks which we insert simple HTML or text that will be displayed inside the block (see the following example)</para></listitem><listitem><para>Blocks of files: They are PHP scripts that execute predetermined commands (see the following paragraph)</para></listitem></itemizedlist><para>In order to create a new block that will be added to the list of available blocks, we must scroll down the page and position ourselves on &quot;add block&quot;. </para><para>The title field is a common element for all and will be compiled in.</para><itemizedlist><listitem><para>If we want to create a RSS/RDF block we must choose the news source from the available list or add one by clicking on &ldquo;setup&rdquo;. In this case we will supply the address of the file to read (this info generally will be supplied by the webmaster of the site from which we capture the news, or, if it is a site created with PHP-Nuke, simply by asking for the file backend.php of that site). The other fields will all be compiled in with the exception of &ldquo;filename&rdquo; and &ldquo;Content&rdquo;.</para></listitem><listitem><para>If we want to create a block of simple text instead, we will omit the field &ldquo;RSS/RDF file URL&rdquo; and will complete &ldquo;Content&rdquo; instead (Omitting &rdquo;filename&rdquo;).</para></listitem><listitem><para>If instead we want to include the PHP files that interface with a database or perform particular functions, then we will omit &ldquo;Content&rdquo; and &ldquo;RSS/RDF&rdquo; and will choose between the available files the one that will create our block. (If you want more info on how to create blocks, see <xref linkend="blocks">). </para></listitem></itemizedlist><para>Remember that before publishing a block a preview will be shown to us.</para><variablelist><varlistentry><term>Content&nbsp;Manager<indexterm><primary>Content Manager</primary></indexterm>:
</term><listitem><para>This function allowes us to add new categories and new content inside the content section. It is  very similar to the articles but with less functions. A noteworthy feature is the possibility to add the tag</para></listitem></varlistentry></variablelist><screen><![CDATA[<! -- pagebreak -- > 
]]></screen><para>in order to create a multipage article.</para><variablelist><varlistentry><term>Downloads<indexterm><primary>Downloads</primary></indexterm>:
</term><listitem><para>It creates categories, subcategories and adds files to the download area. For security reasons, the system does not allow file uploads via HTTP, only their linking through their HTTP address. If for example the file <emphasis>files.zip</emphasis> is found in the directory <emphasis>files</emphasis> of our site, we would have to link it as <emphasis>www.oursite.com/files/file.zip</emphasis>. This allows us to link external resources also.</para></listitem></varlistentry><varlistentry><term>Edit&nbsp;Administrators<indexterm><primary>Edit Administrators</primary></indexterm>:
</term><listitem><para>Enables us to add new administrators, defining their access levels. Besides having a super administrator it is in fact possible to activate only partial functions for the various administrators.</para></listitem></varlistentry><varlistentry><term>Edit&nbsp;Users<indexterm><primary>Edit Users</primary></indexterm>:
</term><listitem><para>From here it is possible to manually add new users and to modify existing ones, choosing their profile by typing the nickname in the appropriate form.</para></listitem></varlistentry><varlistentry><term>Encyclopedia<indexterm><primary>Encyclopedia</primary></indexterm>:
</term><listitem><para>Allows the creation of multiple word lists (choosing also the language), after having created an encyclopedia we can proceed to the insertion of terms.</para></listitem></varlistentry><varlistentry><term>Ephemerids<indexterm><primary>Ephemerids</primary></indexterm>:
</term><listitem><para>Allows the insertion of recurrent events choosing the date and inserting a description.</para></listitem></varlistentry><varlistentry><term>FAQ<indexterm><primary>FAQ</primary></indexterm>:
</term><listitem><para>Allows the creation of the main FAQ categories and all related questions/answers.</para></listitem></varlistentry><varlistentry><term>Splatt&nbsp;Forum<indexterm><primary>Splatt Forum</primary></indexterm>:
</term><listitem><para>The management of the forum is divided in 4 areas: </para></listitem></varlistentry></variablelist><itemizedlist><listitem><para>Preferences: It manages the characteristics of the forum (For security reasons it's advisable to deactivate the option to mail in HTML).</para></listitem><listitem><para>Categories and forum: defines the categories, the forums included in them, the moderators of every forum, levels of access etc... For a forum to be visible, you MUST activate at least one moderator otherwise the forum won't show up!</para></listitem><listitem><para>Ranks: defines the attention thresholds for the forum. Upon reception of the nth post, aproppriate images will be attached to attract proper attention of the visitors.</para></listitem><listitem><para>Users: moderator management through a complete list of the registered users.</para></listitem></itemizedlist><variablelist><varlistentry><term>HTTP&nbsp;Referrers<indexterm><primary>HTTP Referrers</primary></indexterm>:
</term><listitem><para>It displays the origin of the last accesses to the site.</para></listitem></varlistentry><varlistentry><term>Messages<indexterm><primary>Messages</primary></indexterm>:
</term><listitem><para>It creates a central block in the Home Page in order to send selective messages to the users. The messages can be sent to only registered users, to non-registered users, to the administrator or one may carry out a selection by language.</para></listitem></varlistentry><varlistentry><term>Modules<indexterm><primary>Modules</primary></indexterm>:
</term><listitem><para>Allows the management of the modules installed. The modules can be activated, deactivated or be assigned read permissions. A module can be world-readable, readable only by the registered users, or only the administrator.</para></listitem></varlistentry><varlistentry><term>Newsletter<indexterm><primary>Newsletter</primary></indexterm>:
</term><listitem><para>the PHP-Nuke administrator can send a newsletter to the registered users who have consented to receive them or send them to all the registered users. Attention to spam!</para></listitem></varlistentry><varlistentry><term>Optimize&nbsp;DB<indexterm><primary>Optimize DB</primary></indexterm>:
</term><listitem><para>Optimizes the data increasing database speed.</para></listitem></varlistentry><varlistentry><term>Preferences<indexterm><primary>Preferences</primary></indexterm>:
</term><listitem><para>This subject will be treated in <xref linkend="preferences">.</para></listitem></varlistentry><varlistentry><term>Book&nbsp;Reviews<indexterm><primary>Books Reviews</primary></indexterm>:
</term><listitem><para>It allows us to insert book reviews. In every book review it is possible to cast a vote, a link relative to the subject and finally an image that represents the content.</para></listitem></varlistentry><varlistentry><term>Section&nbsp;Manager<indexterm><primary>Section Manager</primary></indexterm>:
</term><listitem><para>it manages the sections and contents thereof. It is possible to associate an image to the section subject, just as it is in the topics. It is  possible to add articles to the sections selecting the aproppriate category through a radio button, to divide long texts using the &lt;! -- pagebreak -- &gt; tag and to edit or cancel already added sections.</para></listitem></varlistentry><varlistentry><term>Articles<indexterm><primary>Articles</primary></indexterm>:
</term><listitem><para>Manages articles inserted by third parties. It is the moderation area of the News module that we have already analyzed in this section.</para></listitem></varlistentry><varlistentry><term>Survey/Polls<indexterm><primary>Survey</primary></indexterm>:
</term><listitem><para>Creates a new survey for the site, edits or cancels old ones. It is possible to insert up to 10 different answers to every survey. In the context of the creation of the survey it is possible, on the same page, to publish a news article that announces its creation.</para></listitem></varlistentry><varlistentry><term>Topics<indexterm><primary>Topics</primary></indexterm>:
</term><listitem><para>Allows you to create new topics and the association, through a pop-up menu, of corresponding images.</para></listitem></varlistentry><varlistentry><term>Links<indexterm><primary>Links</primary></indexterm>:
</term><listitem><para>Allows us to edit links published by others, create categories for archiving the links, eliminate links, see user messages informing us of any broken links through an interface very similar to the downloads section and add new links.</para></listitem></varlistentry><varlistentry><term>Logout<indexterm><primary>Logout</primary></indexterm>/Exit<indexterm><primary>Exit</primary></indexterm>:
</term><listitem><para>Exits from the administration area rendering the cookie invalid. It is  good practice to login logout after having finished working with PHP-Nuke. For security reasons.</para></listitem></varlistentry></variablelist></sect1>
<sect1 id="preferences"><title>The Preferences Page </title><para>Here are the parameters needed for the configuration of the config.php file through the admin/preferences area:</para><itemizedlist><listitem><para>Site name: It corresponds to the <ulink url="http://www.w3.org/TR/html4/struct/global.html#adef-title">title</ulink> tag, it is what appears up in the right bar of the browser. It is  very important for the <ulink url="http://www.w3.org/TR/html4/appendix/notes.html#h-B.4">search engines</ulink>.</para></listitem><listitem><para>Site URL: It is  the internet address of your site.</para></listitem><listitem><para>Logo<indexterm><primary>logo</primary></indexterm>: It is the logo of your site. In standard themes and themes not modified much it is the Logo that appears up on the left.</para></listitem><listitem><para>Slogan<indexterm><primary>slogan</primary></indexterm>: It is equivalent to the <ulink url="http://www.w3.org/TR/html4/struct/global.html#edef-META">description</ulink> tag, it's also very important for the <ulink url="http://www.w3.org/TR/html4/appendix/notes.html#h-B.4">search engines</ulink>.</para></listitem><listitem><para>Beginning date of the site: It's the date that appears in the statistics module.</para></listitem><listitem><para>Administrator e-mail : it is the e-mail which will receive the notifications for article insertions by third parties and the mails from the &quot;contact us&quot; module.</para></listitem><listitem><para>Articles in Top Page: Specifies the number of news articles that can be displayed in the main page of the news module.</para></listitem><listitem><para>Articles in Home: Specifies the number of news articles that can be displayed in the home page of the site (if the news module is the main one).</para></listitem><listitem><para>Stories in old articles box: Specifies the number of news articles that can be displayed in the old articles box.</para></listitem><listitem><para>Activate ultramode<indexterm><primary>ultramode</primary></indexterm>: specifies if other sites can take news titles from our site.</para></listitem><listitem><para>Allow anonymous to post<indexterm><primary>anonymous</primary></indexterm> : Specifies whether anonymous users can write comments.</para></listitem><listitem><para>Default theme: defines the default theme of the site.</para></listitem><listitem><para>Select language: defines the default language of the site.</para></listitem><listitem><para>local time<indexterm><primary>local time</primary></indexterm> format: defines the format of the local time (Depends on the server, if it is running linux, this is controlled in <emphasis><ulink url="http://www.debian.org/doc/manuals/intro-i18n/ch-locale.en.html">/usr/share/locale</ulink></emphasis>)</para></listitem><listitem><para>activate the multilanguage<indexterm><primary>multilanguage</primary></indexterm> characteristics: choose whether the site should support a multilingual functionality or not</para></listitem><listitem><para>display the small flags in place of the list: if the multilingual option is activated then this decides whether the block should display the small state flags in place of a list of language names.</para></listitem><listitem><para>activate banners<indexterm><primary>banners</primary></indexterm> : sets up the option to use banner rotation on the site.</para></listitem><listitem><para>For the footer of the page, imagine we have to insert 3 texts in a table that is 100&percnt; wide and positioned centrally:</para><itemizedlist><listitem><para>Page Footer<indexterm><primary>Footer</primary></indexterm> Line 1: first text to insert</para></listitem><listitem><para>Page Footer Line 2: second text to insert</para></listitem><listitem><para>Page Footer Line 3: third text to insert</para></listitem></itemizedlist></listitem><listitem><para>Backend<indexterm><primary>backend</primary></indexterm> title: The title that will appear in the file from which other sites get our newsfeed.</para></listitem><listitem><para>Backend language: language for the newsfeed file.</para></listitem><listitem><para>Notify new insertions via e-mail: It defines whether the administrator gets an e-mail when a user inserts a news article.</para></listitem><listitem><para>E-mail address to send the message: e-mail to which the notification message will be sent.</para></listitem><listitem><para>E-mail subject:</para></listitem><listitem><para>E-mail message: notification text (e.g. &quot;you have received a new article&quot;).</para></listitem><listitem><para>E-mail account (From): who has sent the message.</para></listitem><listitem><para>Moderation<indexterm><primary>moderation</primary></indexterm> type: chooses whether a moderation should be set up for the comments or not.</para></listitem><listitem><para>Comment limits in Bytes: sets up the maximum size for the comments.</para></listitem><listitem><para>Default anonymous user name: assigns a name to the persons who chose to remain unregistered.</para></listitem><listitem><para>Graphical administration menu: sets up whether to have icons or text in the administration area.</para></listitem><listitem><para>Minimal length for the user's password: for security reasons it is advisable to set up a rather long password.</para></listitem><listitem><para>Activate referring HTTP: whether statistics regarding the origin of the visits should be gathered.</para></listitem><listitem><para>How many referrers you want maximally: the maximum number of statistics pertaining to the origin of the visits (max 2000).</para></listitem><listitem><para>Activate comments<indexterm><primary>comments</primary></indexterm> in surveys: Whether comments are allowed in the surveys or not.</para></listitem><listitem><para>Activate comments in articles: Whether comments are allowed in the articles or not.</para></listitem></itemizedlist></sect1>
</chapter>
<chapter id="installation"><title>How to install PHP-Nuke</title><para>The screenshots regarding the installation<indexterm><primary>installation</primary></indexterm> procedure, contrary to those of the other chapters, refer to the Windows platform. This is so in an effort to reduce the number of misunderstandings and ulterior help requests from the Windows community. (Judging from the feedback we receive, the Linux and FreeBSD community seem to be more able to deal with installation problems in this respect). </para><para>For the installation of <ulink url="http://www.php.net">PHP</ulink>+ <ulink url="http://www.mysql.org">MySQL</ulink>+ <ulink url="http://www.apache.org">Apache</ulink>, <ulink url="http://www.phpmyadmin.net/">PHPMyAdmin</ulink> etc. refer to <xref linkend="tools"> where you will find notes and links to useful tools in order to emulate PHP-Nuke on your client.</para><para>These instructions are valid for all PHP-Nuke versions up to 5,6, from 6 onwards the installation procedure will be much simpler.</para><sect1 id="installation-process"><title>Installation process</title><sect2><title>Download<anchor id="download"></title><para>Well... there is little to say here, it suffices to go to a site that holds the files and download them. There is only a small remark to make: if you use Windows and download<indexterm><primary>download</primary></indexterm> a version comprised of a file with the ending tar.gz, do not worry, your <ulink url="http://www.winzip.com">Winzip</ulink> supports it without problems. Once downloaded, extract it and &quot;throw&quot; all its contents in a folder you created for this purpose and you call &quot;Nuke5&quot; or whatever ( sites from which you can download PHP-Nuke are: <ulink url="http://phpnuke.org">phpnuke.org</ulink>, <ulink url="http://www.spaghettibrain.com">www.spaghettibrain.com</ulink> etc.).</para></sect2>
<sect2 id="upload"><title>Upload through FTP</title><para>Well, now what remains is just to upload the files to the interior of our main server directory that resides on our provider. </para><caution>
<title>
Attention!
</title>
<para>
It is highly recommended, prior to any installation steps, to verify that your provider supports <ulink url="http://www.php.net">PHP</ulink> and  <ulink url="http://www.mysql.org">MySQL</ulink>.
</para>
</caution>
<tip>
<title>
Tip
</title>
<para>
Don't upload all extracted  files. After extraction, you will find a structure similar to the one depicted in <xref linkend="fig-file-structure">.

<figure id="fig-file-structure">
   <title>
   PHP-Nuke 6.0 file structure
   </title>
   <mediaobject>
      <![ %output.print.png; [
      <imageobject>
         <imagedata fileref="./images/&graph1013;.png" format="PNG">
      </imageobject>
      ]]>
      <![ %output.print.pdf; [
      <imageobject>
         <imagedata fileref="&graph1013;.pdf" format="PDF" scale="65">
      </imageobject>
      ]]>
      <![ %output.print.eps; [
      <imageobject>
         <imagedata fileref="&graph1013;.eps" format="EPS">
      </imageobject>
       ]]>
      <![ %output.print.bmp; [
      <imageobject>
         <imagedata fileref="&graph1013;.bmp" format="BMP">
      </imageobject>
       ]]>
      <textobject>
         <phrase>PHP-Nuke 6.0 file structure</phrase>
      </textobject>
      <caption>
         <para>PHP-Nuke 6.0 file structure</para>
      </caption>
   </mediaobject>
</figure>

You don't need to upload all the files from the folder, in the main directory of your web presence you will only need to upload the contents of the html folder (so just do a doubleclick on the html folder and upload everything that is inside it).
</para>
</tip>
</sect2>
<sect2 id="permissions"><title>Formulation of the file permissions</title><important>
<title>Important</title>
<para>
This process only really applies if your PHP-Nuke will be installed on a Linux/Unix server, if instead you will install it on Windows operating systems you don't have to do anything.
</para>
</important>
<para>Setting up permissions<indexterm><primary>permissions</primary></indexterm> on files serves the purpose of having them execute only certain operations (write, execute etc.) when called. Setting them up correctly is important for PHP-Nuke to operate in its full functionality. </para><para>The permissions to give are the following (for the base permissions, see <xref linkend="permissions2"> in the context of security):</para><itemizedlist><listitem><para>Files: 666 </para></listitem><listitem><para>Directories: 777</para></listitem></itemizedlist><para>With <ulink url="http://www.ftpplanet.com/ftpresources/ftpmain.htm">WS_FTP</ulink> you must select the files or folders on which you want to impose the permissions and, with the right mouse key, to select the option CHMOD.</para><para>Once you set up the permissions on all folders and all files, this procedure will cost you some time, but it is very important to carry out. Moreover, you will have to do it every time you insert a new file or module to your PHP-Nuke. </para></sect2>
</sect1>
<sect1 id="phpmyadmin"><title>How to install PHP-Nuke through PHPMyadmin</title><sect2><title>What Is PHPMyadmin<anchor id="whatis-phpmyadmin"></title><para><ulink url="http://www.phpmyadmin.net/">PHPMyAdmin</ulink><indexterm><primary>PHPMyAdmin</primary></indexterm> is an visual system for the management of a <ulink url="http://www.mysql.org">MySQL</ulink> database (see <xref linkend="fig-myadmin1">). It is written in <ulink url="http://www.php.net">PHP</ulink> and serves to display the contents of the databases on the server (or client) on which MySQL is installed. Through this interface you can create new databases, modify existing ones and modify the contents of single fields.</para><para>
<figure id="fig-myadmin1">
   <title>
   PHPMyAdmin start screen
   </title>
   <mediaobject>
      <![ %output.print.png; [
      <imageobject>
         <imagedata fileref="./images/&graph1014;.png" format="PNG">
      </imageobject>
      ]]>
      <![ %output.print.pdf; [
      <imageobject>
         <imagedata fileref="&graph1014;.pdf" format="PDF" scale="65">
      </imageobject>
      ]]>
      <![ %output.print.eps; [
      <imageobject>
         <imagedata fileref="&graph1014;.eps" format="EPS">
      </imageobject>
       ]]>
      <![ %output.print.bmp; [
      <imageobject>
         <imagedata fileref="&graph1014;.bmp" format="BMP">
      </imageobject>
       ]]>
      <textobject>
         <phrase>PHPMyAdmin start screen</phrase>
      </textobject>
      <caption>
         <para>PHPMyAdmin start screen</para>
      </caption>
   </mediaobject>
</figure>
</para></sect2>
<sect2 id="install-db"><title>How to install the DB of PHP-Nuke with PHPMyadmin</title><para>Clicking on the left bar, depending on the database you selected, you will see a list menu coming up, showing the structure of the database (and, on the same time, the central page will show the enlarged structure of the database), with a series of options, all of them in the bottom of the page (see <xref linkend="fig-myadmin2">). It is these options we are interested in when installing PHP-Nuke.</para><para>
<figure id="fig-myadmin2">
   <title>
   PHPMyAdmin table selection
   </title>
   <mediaobject>
      <![ %output.print.png; [
      <imageobject>
         <imagedata fileref="./images/&graph1015;.png" format="PNG">
      </imageobject>
      ]]>
      <![ %output.print.pdf; [
      <imageobject>
         <imagedata fileref="&graph1015;.pdf" format="PDF" scale="65">
      </imageobject>
      ]]>
      <![ %output.print.eps; [
      <imageobject>
         <imagedata fileref="&graph1015;.eps" format="EPS">
      </imageobject>
       ]]>
      <![ %output.print.bmp; [
      <imageobject>
         <imagedata fileref="&graph1015;.bmp" format="BMP">
      </imageobject>
       ]]>
      <textobject>
         <phrase>PHPMyAdmin table selection</phrase>
      </textobject>
      <caption>
         <para>PHPMyAdmin table selection</para>
      </caption>
   </mediaobject>
</figure>
</para><para>What you have to do now, is to click on &quot;browse&quot; and go search for the .sql file that contains the instructions that build the structure of the PHP-Nuke database (see <xref linkend="fig-SQL-query">). Once found, it suffices to click on &quot;Go&quot; and the database will be installed. Of course, if there are errors, they will be reported at the end of the installation procedure. And of course, the same holds for the message &quot;operation succeeded&quot;.</para><para>
<figure id="fig-SQL-query">
   <title>
   PHPMyAdmin: SQL query
   </title>
   <mediaobject>
      <![ %output.print.png; [
      <imageobject>
         <imagedata fileref="./images/&graph1016;.png" format="PNG">
      </imageobject>
      ]]>
      <![ %output.print.pdf; [
      <imageobject>
         <imagedata fileref="&graph1016;.pdf" format="PDF" scale="65">
      </imageobject>
      ]]>
      <![ %output.print.eps; [
      <imageobject>
         <imagedata fileref="&graph1016;.eps" format="EPS">
      </imageobject>
       ]]>
      <![ %output.print.bmp; [
      <imageobject>
         <imagedata fileref="&graph1016;.bmp" format="BMP">
      </imageobject>
       ]]>
      <textobject>
         <phrase>PHPMyAdmin: SQL query</phrase>
      </textobject>
      <caption>
         <para>PHPMyAdmin: SQL query</para>
      </caption>
   </mediaobject>
</figure>
</para><tip>
<title>Tip</title>
<para>
Other options of PHPMyAdmin  that are not relative  to the  installation of PHP-Nuke can be found in  the <ulink url="http://www.spaghettibrain.com/modules.php?name=Downloads&amp;d_op=viewdownload&amp;cid=1">tutorial published on www.spaghettibrain.com</ulink> and in <xref linkend="phpmyadmin2">.
</para>
</tip>
<para>
<figure id="fig-myadmin4">
   <title>
   PHPMyAdmin: table data
   </title>
   <mediaobject>
      <![ %output.print.png; [
      <imageobject>
         <imagedata fileref="./images/&graph1017;.png" format="PNG">
      </imageobject>
      ]]>
      <![ %output.print.pdf; [
      <imageobject>
         <imagedata fileref="&graph1017;.pdf" format="PDF" scale="65">
      </imageobject>
      ]]>
      <![ %output.print.eps; [
      <imageobject>
         <imagedata fileref="&graph1017;.eps" format="EPS">
      </imageobject>
       ]]>
      <![ %output.print.bmp; [
      <imageobject>
         <imagedata fileref="&graph1017;.bmp" format="BMP">
      </imageobject>
       ]]>
      <textobject>
         <phrase>PHPMyAdmin: table data</phrase>
      </textobject>
      <caption>
         <para>PHPMyAdmin: table data</para>
      </caption>
   </mediaobject>
</figure>
</para><para>
<figure id="fig-myadmin5">
   <title>
   PHPMyAdmin: database dump
   </title>
   <mediaobject>
      <![ %output.print.png; [
      <imageobject>
         <imagedata fileref="./images/&graph1018;.png" format="PNG">
      </imageobject>
      ]]>
      <![ %output.print.pdf; [
      <imageobject>
         <imagedata fileref="&graph1018;.pdf" format="PDF" scale="65">
      </imageobject>
      ]]>
      <![ %output.print.eps; [
      <imageobject>
         <imagedata fileref="&graph1018;.eps" format="EPS">
      </imageobject>
       ]]>
      <![ %output.print.bmp; [
      <imageobject>
         <imagedata fileref="&graph1018;.bmp" format="BMP">
      </imageobject>
       ]]>
      <textobject>
         <phrase>PHPMyAdmin: database dump</phrase>
      </textobject>
      <caption>
         <para>PHPMyAdmin: database dump</para>
      </caption>
   </mediaobject>
</figure>
</para></sect2>
<sect2><title>The config.php file</title><para>Ok, the last thing that remains to do before starting with the management of your site, is to configure the file config.php<indexterm><primary>config.php</primary></indexterm> This is important because it sets up a connection between the PHP files of PHP-Nuke and the MySQL database that manages it.</para><para>There is only a few parameters to configure. When you open the file &quot;config.php&quot; you will see the following near the top:</para><screen>
$dbhost = "localhost"; <co id="dbhost">
$dbuname = "root"; <co id="dbuname">
$dbpass = ""; <co id="dbpass">
$dbname = "nuke"; <co id="dbname">
$system = "1"; <co id="system">
$prefix = "nuke"; <co id="prefix">
$user_prefix = "nuke"; 
$dbtype = "MySQL"; 
</screen>
<calloutlist>
    <callout arearefs="dbhost">
       <para>
       In place of  "localhost" you will have to put  the host/server that the database is installed on.
      </para>
    </callout>
    <callout arearefs="dbuname">
       <para>
       In place of  "root"  you must put your username.
       </para>
    </callout>
<callout arearefs="dbpass">
       <para>
       You will have  to insert your password here.
       </para>
    </callout>
<callout arearefs="dbname">
       <para>
       In place of "nuke" you will have  to insert the name of your database here.
       </para>
    </callout>
<callout arearefs="system">
       <para>
       Leave it to 0 if  on Linux/Unix systems,  put 1 if on a Windows server)
       </para>
    </callout>
<callout arearefs="prefix">
       <para>
       I recommend this to be left to its default value, "nuke", is the prefix that goes in front of the name of every database table.
       </para>
    </callout>
</calloutlist>
<para>Let's do an example:</para><itemizedlist><listitem><para>Host DB: 212.110.12.297 </para></listitem><listitem><para>User DB: Pippo </para></listitem><listitem><para>Password DB: Topolino </para></listitem><listitem><para>Database Name: Orazio </para></listitem><listitem><para>Operating System Used: Linux (what else!!! :-) )</para></listitem></itemizedlist><para>The file config.php should then look like:</para><screen><![CDATA[$dbhost = "212.110.12.297";
]]><![CDATA[$dbuname = "Pippo";
]]><![CDATA[$dbpass = "Topolino";
]]><![CDATA[$dbname = "Orazio";
]]><![CDATA[$system = 0;
]]><![CDATA[$prefix = "nuke"; 
]]></screen><caution>
<title>Attention!</title>
<para>
This is case sensitive! Remember to use The Capital Letters!!! On Linux systems, if you write a user name or a password without  taking care of letter case, the system will not allow you to log in.
</para>
</caution>
<para>Ok, we are done, the only thing that remains to do is to enter the administration section (www.yoursite.com/admin.php). The very first time you will log in using &ldquo;God&rdquo; as username and &ldquo;Password&rdquo; as password. I recommend you to change these as soon as possible.</para></sect2>
<sect2 id="resources"><title>Resources</title><para>If you are looking for PHP-Nuke hosting, <ulink url="http://www.spaghettibrain.com">Spaghettibrain.com</ulink> has custom offers for you... give us a visit! <ulink url="http://www.spaghettibrain.com">Spaghettibrain.com</ulink> is the italian support site for PHP-Nuke, there you will find modules, security patches, support forums and a lot more. Come for a tour soon.</para></sect2>
</sect1>
</chapter>
<chapter id="architecture"><title>Architecture and structure </title><para>The structure of PHP-Nuke is organized in to modules, all the files are managed by other files that are located in the PHP-Nuke root directory and include, according to the parameters passed to them, the intended module.</para><para>These tasks are carried out from only 3 pages:</para><itemizedlist><listitem><para>index.php<indexterm><primary>index.php</primary></indexterm> : In order to display the main page</para></listitem><listitem><para>modules.php<indexterm><primary>modules.php</primary></indexterm> : In order to include the internal modules.</para></listitem><listitem><para>admin.php<indexterm><primary>admin.php</primary></indexterm> : In order to include the administration interface.</para></listitem></itemizedlist><para>It's not possible to call a module by calling a direct path to it. This is so in order to make installation easier, render the graphics management more independent (otherwise we would have to change the path of the images each time we position ourselves in an internal directory), have only a few files in the root directory and render the system more secure. </para><para>Everything is being called, as I said, through parameters (strings) passed to the &quot;modules.php&quot; file which specify which files are to be included. If for example we want to call the Topics module, the string to be passed should be <ulink url="http://www.yoursite.com/modules.php?name=Topics">http://www.yoursite.com/modules.php?name=Topics</ulink></para><para>The command that is sent this way is &quot;includes in the page created by modules.php the output of the file index.php that is found in the folder modules/Topics/&quot;.</para><para>The other files present in the PHP-Nuke root directory are:</para><itemizedlist><listitem><para>auth.php<indexterm><primary>auth.php</primary></indexterm>: Manages authentication through the cookies.</para></listitem><listitem><para>mainfile.php<indexterm><primary>mainfile.php</primary></indexterm>: Contains all the necessary functions for the management of PHP-Nuke</para></listitem><listitem><para>header.php<indexterm><primary>header.php</primary></indexterm>: manages the variables that are related to the header (inclusion of metatags, Javascript...)</para></listitem><listitem><para>footer.php<indexterm><primary>footer.php</primary></indexterm>: variables related to the footer.</para></listitem><listitem><para>backend.php<indexterm><primary>backend.php</primary></indexterm>: manages the output of the news that can be captured from other sites</para></listitem><listitem><para>ultramode.txt<indexterm><primary>ultramode.txt</primary></indexterm>: ditto</para></listitem><listitem><para>robots.txt<indexterm><primary>robots.txt</primary></indexterm>: contains instructions for the search engines informing them which folders not to index</para></listitem></itemizedlist><sect1 id="directory-structure"><title>Directory structure </title><variablelist><varlistentry><term>Admin<indexterm><primary>Admin</primary></indexterm>:
</term><listitem><para>Contains 4 subdirectories (links, language, case, modules) that manage the various administration modules. The folder that accommodates the operating files is modules/admin/ .</para></listitem></varlistentry><varlistentry><term>Blocks<indexterm><primary>Blocks</primary></indexterm>:
</term><listitem><para>Contains all the block files for all of our available blocks. </para></listitem></varlistentry><varlistentry><term>Images<indexterm><primary>Images</primary></indexterm>:
</term><listitem><para>Contains all the images relating to PHP-Nuke, for example in the folder &quot;topics&quot; we will find archived the images of the topics that will appear in the news, in &quot;banners&quot; all banners in rotation etc...</para></listitem></varlistentry><varlistentry><term>In&nbsp;includes<indexterm><primary>includes</primary></indexterm>
</term><listitem><para>are all the files that are necessary to particular management situations, these files do not work independently but are included in other files, mainly in mainfile.php and header.php. The files are:</para></listitem></varlistentry></variablelist><itemizedlist><listitem><para>counter.php<indexterm><primary>counter.php</primary></indexterm> : serves to identify the users based on the operating system used, the browser, the page of origin, date of the visit...</para></listitem><listitem><para>javascript.php<indexterm><primary>javascript.php</primary></indexterm> : includes all necessary Javascript (if you need particular Javascript code, include it in this file).</para></listitem><listitem><para>meta.php<indexterm><primary>meta.php</primary></indexterm> : manages the keywords to pass to the search engines and other parameters of the header. It is  an optimal system for learning how to create keywords and position the site with a good ranking in the search engines.</para></listitem><listitem><para>my_header.php<indexterm><primary>my_header.php</primary></indexterm> : manages the disclaimer message in the homepage.</para></listitem><listitem><para>sql_layer.php<indexterm><primary>sql_layer.php</primary></indexterm> : serves to manage the database abstraction layer. Transforms SQL instructions to the language of the chosen database. Remember that PHP-Nuke can manage various databases.</para></listitem></itemizedlist><variablelist><varlistentry><term>Language<indexterm><primary>Language</primary></indexterm>:
</term><listitem><para>contains translation files for the basic PHP-Nuke module. The language file naming convention is lang-english.php. </para></listitem></varlistentry></variablelist><caution>
<title>Attention!</title>
<para>
The translation of the modules must be inserted in the appropriate folders (modules/languange) and not appended   to these files, as it was done till now. 
</para>
</caution>
<variablelist><varlistentry><term>Modules<indexterm><primary>Modules</primary></indexterm>:
</term><listitem><para>The modules of PHP-Nuke comprise all the functionality that one can add to it.. In the Modules folder we insert the folders of every new module.</para></listitem></varlistentry><varlistentry><term>Themes<indexterm><primary>Themes</primary></indexterm>:
</term><listitem><para>Here we add the graphical interfaces known as &quot;Themes&quot;, every folder has the name of the corresponding theme and contains a main file called theme.php and all other support files.</para></listitem></varlistentry><varlistentry><term>Upgrades<indexterm><primary>Upgrades</primary></indexterm>:
</term><listitem><para>contains only the files that serve to upgrade the system from a previous version to a newer one.. </para></listitem></varlistentry></variablelist></sect1>
<sect1 id="main-page-management"><title>Main page management</title><para>The file &quot;index.php&quot; is very simple one, it has the task to load the main PHP-Nuke page the module that was chosen as the default one to appear in the main page of our site.</para><para>Here in detail is what happens when the page &quot;index.php&quot; gets loaded:</para><itemizedlist><listitem><para>the mainfile.php is included,</para></listitem><listitem><para>a database query is made in order to see which module was set up as the default one,</para></listitem><listitem><para>the origin of the visitor is checked (if he comes from a site that links us, this fact will be inserted in a table in the database).</para></listitem></itemizedlist><para>Various checks are also made and error messages are defined in case the connection to the database fails. This avoids (in part) the error messages from the PHP preprocessor. Even if problems come up, the page will be presented in a standard design and the error message will be definable from the inside.</para></sect1>
<sect1 id="module-management"><title>Module management</title><para>For reasons of order, the modules are managed through the files present in the subdirectories that contain them, every module has its own folder in the interior of the folder &quot;modules&quot;.</para><para>In order to be loaded, the module files get included in the modules.php file by passing it the aproppriate parameters. The main page of each module must be called index.php, the other possibly pages possibly present in the module will have an additional variable in the inside of parameter strings by which they are called..</para><para>For example in the AvantGo module (see <xref linkend="AvantGO">) in order to load the index.php file, it is enough to pass the module name to the parameter string (by default, the file that will be searched for is index.php):</para><screen><![CDATA[modules.php?name=AvantGo
]]></screen><para>If we instead wanted to call a page other than the default index.php (say, print.php), the string we will have to pass is :</para><screen><![CDATA[modules.php?name=AvantGo&file=print
]]></screen><para>that is the file variable with a value (print) that corresponds to the name of the file we want to load without the .php extension.</para><para>Inside the folder modules/nameofmodule there is also a subfolder called &quot;language&quot;. In this fashion we manage in a simple and immediate way the multilanguage functionality inside the modules.</para><para>The modules.php<indexterm><primary>modules.php</primary></indexterm> file works this way:</para><itemizedlist><listitem><para>Includes mainfile.php</para></listitem><listitem><para>Verifies whether the module is active or not</para></listitem><listitem><para>Verifies whether the string passes a file name different from index.php</para></listitem><listitem><para>Verifies the permissions of the module (whether everybody can see it, or only registered users, or only the administrator).</para></listitem></itemizedlist></sect1>
<sect1 id="admin-management"><title>Administration management </title><variablelist><varlistentry><term>Admin<indexterm><primary>Admin</primary></indexterm>:
</term><listitem><para>contains 4 subfolders (links, language, case, modules) that manage the various administration modules. The folder that contains the operating files is admin/modules, here we have the files that execute the different admin operations.</para></listitem></varlistentry></variablelist><para>The folder admin/links<indexterm><primary>admin/links folder</primary></indexterm> instead says which admin module has to be called and puts a link in the admin area for that module.</para><para>Example (administration module for the FAQ):</para><screen><![CDATA[if (($radminsuper==1) OR ($radminfaq==1)) {
]]><![CDATA[adminmenu("admin.php?op=FaqAdmin ", "" _FAQ." ", "faq.gif");
]]><![CDATA[}
]]></screen><para>This module:</para><itemizedlist><listitem><para>Verifies that administration rights are present (this module may be managed by either the superadmin or an administrator that has been qualified to do so on the FAQ level),</para></listitem><listitem><para>passes a case (op=FaqAdmin<indexterm><primary>op=FaqAdmin</primary></indexterm>) that says to the admin.php file (that includes all the admin modules) which module to load, associates a value in order to translate the term &quot;faq&quot; and associates an icon for the visual administration (faq.gif).</para></listitem></itemizedlist><para>The folder admin/case<indexterm><primary>admin/case folder</primary></indexterm> instead serves to define which module to use in certain cases. This is important when, using the same admin file, one needs to carry out different operations according to the case passed:</para><screen><![CDATA[Case1 = insert
]]><![CDATA[Case2 = cancel
]]><![CDATA[etc...
]]></screen><para>In fact it says which module to load on verification of a case. For example, in the module faq the cases are many, let's consider only the last 2:</para><screen><![CDATA[case "FaqAdmin":
]]><![CDATA[case "FaqCatGo":
]]><![CDATA[include ("admin/modules/adminfaq.php");
]]><![CDATA[break;
]]></screen><para>Both cases load the file adminfaq.php but they make it carry out different operations. The first one loads the file in the default scheme, the second one instead gives the O.K. for the insertion of a new category. This happens through a string like</para><screen><![CDATA[admin.php?op=FaqAdmin 
]]></screen><para>in the first case and </para><screen><![CDATA[admin.php?op=FaqCatGo 
]]></screen><para>in the second.</para></sect1>
</chapter>
<chapter id="customization"><title>Customising PHP-Nuke themes </title><sect1 id="topic-structure"><title>Structure of a PHP-Nuke theme</title><para>Making your own personal graphical theme<indexterm><primary>theme</primary></indexterm> for your site is very important so that you don't have another PHP-Nuke clone, if your site looks the same as other sites it dosn't make you, the Webmaster look very professional. Personalising the portal starts from the graphical side of things. Knowing how to put your hands on a PHP-Nuke theme means being able to play with all of the graphical elements that we can use. The example theme we will use in this chapter is the NukeNews theme, made by Francisco Burzi for PHP-Nuke. It's a theme composed of alot of HTML files included in theme.php. This is a very good solution that permits you to manage the graphical part of the theme through an editor like DreamWeaver using the least amount of PHP code.</para><para>The NukeNews theme is structured in this way:</para><itemizedlist><listitem><para>theme.php<indexterm><primary>theme.php</primary></indexterm>: It manages the main functions of the variables for the background colors.</para></listitem><listitem><para>tables.php<indexterm><primary>tables.php</primary></indexterm>: it manages the functions opentable(); and closetable();</para></listitem><listitem><para>header.html<indexterm><primary>header.html</primary></indexterm>: It manages the header for your site</para></listitem><listitem><para>footer.html<indexterm><primary>footer.html</primary></indexterm> It manages the footer for your site</para></listitem><listitem><para>blocks.html<indexterm><primary>blocks.html</primary></indexterm> It manages the blocks</para></listitem><listitem><para>center_right.html<indexterm><primary>center_right.html</primary></indexterm> Manages the outlay of the page.</para></listitem><listitem><para>center_left.html<indexterm><primary>center_left.html</primary></indexterm>Manages the layout of the page.</para></listitem><listitem><para>story_home.html<indexterm><primary>story_home.html</primary></indexterm>Manages the layout of the page.</para></listitem><listitem><para>story_page.html<indexterm><primary>story_page.html</primary></indexterm>Manages the layout of the page.</para></listitem></itemizedlist><para>These files are included in the functions specified in theme.php We then have a style sheet called style.css (style/style.css) included in the header.html file in our theme folder. For convention, the style sheet must always be called style.css and must always be contained in one folder called &quot;style&quot; inside of our theme folder. The images generally are grouped in a folder called &quot;images&quot; that is always found in our themes folder. </para><para>The folder structure of the NukeNews topic will be : </para><itemizedlist><listitem><para>themes/NukeNews<indexterm><primary>themes/NukeNews</primary></indexterm></para></listitem><listitem><para>themes/NukeNews/style/<indexterm><primary>themes/NukeNews/style</primary></indexterm></para></listitem><listitem><para>themes/NukeNews/images/<indexterm><primary>themes/NukeNews/images</primary></indexterm></para></listitem></itemizedlist><para>Always remember that case is important, you must respect the difference between UPPERCASE and lowercase for compatibility with any Unix systems. </para><para>The theme.php file is the heart of all PHP-Nuke's graphical management. </para><para>The HTML file inclusion does not happen in all kind's of themes, some programmers include all the HTML in the theme.php file, but including it separately, solves many problems such as HTML formatting, that would otherwise be included in the PHP code. It also gives us the possibility of editing all with a visual editor (WYSIWYG<indexterm><primary>WYSIWYG</primary></indexterm>). </para><para>The theme.php is the file that creates the managing functions of all of PHP-Nuke's components (header<indexterm><primary>header</primary></indexterm>, footer<indexterm><primary>footer</primary></indexterm>, central parts, block...).</para><para>The themeheader()<indexterm><primary>themeheader</primary></indexterm> function manages the site header. It is composed of various tables that form the heading, and sometimes also defines some elements of the body tag that are not included in the style sheet and the variables that are placed inside the included html files. </para><variablelist><varlistentry><term>Example:
</term><listitem><para>The variable &dollar;theuser is defined inside of the themeheader() function and is then recalled in the header.html file in a table: </para></listitem></varlistentry></variablelist><para>Code in theme.php (that defines the &dollar;theuser variable)</para><screen><![CDATA[if ($username == "Anonymous") {
]]><![CDATA[$theuser = "&nbsp;&nbsp; <a href=\"modules.php?name=Your_Account &op=new_user\">Create an account";
]]><![CDATA[} else {
]]><![CDATA[$theuser = "&nbsp;&nbsp;Welcome $username!";
]]><![CDATA[}
]]></screen><para>Code in header.html (that visualises the &dollar;theuser variable)</para><screen><![CDATA[<td width="15% "nowrap >< font class="content" color="#363636 " >
]]><![CDATA[<b> $theuser </b></font></td>
]]></screen><para>The themefooter()<indexterm><primary>themefooter</primary></indexterm>; function manages the footer of our site.</para><para>It has some interesting elements we have to analyse:</para><para>First of all, it identifies if the visualised page has got the &dollar;index variable set equal to 1, in this case we will also insert the right blocks on our page, but if instead &dollar;index==0 then the right blocks will not appear on our page. </para><para>It then defines the footer messages (which are captured from config.php) and inserts all them in a variable that is recalled from the footer.html file. </para><para>The function themeindex()<indexterm><primary>themeindex</primary></indexterm> manages the news in Home Page and formats them adding elements according to various cases using the function &quot;if&quot;. It also includes the story_home.htm file.</para><para>The function themearticle()<indexterm><primary>themearticle</primary></indexterm> instead manages the internal news page (that we can see by pushing on &quot;Read more...&quot;; remember that the layout part in this case is managed including the story_page.htm file, but the blocks that must be included (i.e. the article's survey, correlated links etc.) are defined by the news module. </para><para>The function themesidebox()<indexterm><primary>themesidebox</primary></indexterm> instead manages the layout of the box that we create or that we find already made (see <xref linkend="blocks">), it too includes a file called blocks.htm that defines the style and the layout. </para><para>We have ignored an element of the file theme.php. These are the variables that format the text, some of them are inserted in css (the style sheet) but others are instead defined at the beginning of the theme.php file. </para><para>Let's see the variables from the NukeNews theme: </para><screen><![CDATA[$bgcolor1 = "# efefef";
]]><![CDATA[$bgcolor2 = "# cfcfbb";
]]><![CDATA[$bgcolor3 = "# efefef";
]]><![CDATA[$bgcolor4 = "# cfcfbb";
]]><![CDATA[$textcolor1 = "# 000000";
]]><![CDATA[$textcolor2 = "# 000000";
]]></screen><para>As you see the expression values of these variables are in decimal format. </para><para>Define your site colours<indexterm><primary>colours</primary></indexterm> - &dollar;bgcolor2 is generally used for table edges as you can see in the function opentable(), &dollar;bgcolor1 is used for table background. The others two background variables use the same criteria. &dollar;textcolor1 and &dollar;textcolor2 are used to format the text colour. </para><para>Now we have to examine what is included in the tables.php file. This file creates 4 functions (opentable(); closetable(); opentable2(); closetable2();) that include HTML tags that open and close tables in a predefined way.</para><para>It is very easy to use when creating modules (see <xref linkend="creating-modules">) , you don't have to rewrite the HTML every time you want to create a table but it's enough with the following syntax:</para><screen><![CDATA[opentable();
]]><![CDATA[echo "Content of the table";
]]><![CDATA[closetable();
]]></screen><para>In this way you've created a table in a fast and effective way. But how is this function structured? We will examine first opentable(); then closetable();</para><note>
<title>Please note</title>
<para>
These are php functions so you have to respect the HTML syntax inside php adding / before every " (ie align="left" must be written as align=\"left\") 
</para>
</note>
<screen><![CDATA[function OpenTable() {
]]><![CDATA[global $bgcolor1, $bgcolor2;
]]><![CDATA[echo "<table width=\"100% \" border=\"0 \ "cellspacing=\"1 \" cellpadding=\"0 \ "bgcolor=\"$bgcolor2 \" >< tr >< td > \n ";
]]><![CDATA[echo "< table width=\"100% \" border=\"0 \ "cellspacing=\"1 \" cellpadding=\"8 \ "bgcolor=\"$bgcolor1 \" >< tr >< td > \n ";
]]><![CDATA[}
]]></screen><para>The syntax is very simple, isn't it? </para><itemizedlist><listitem><para>The function is opened</para></listitem><listitem><para>Necessary variables are called (&dollar;bgcolor1, &dollar;bgcolor2) </para></listitem><listitem><para>We open a table 100&percnt; wide and we define the background colours for it</para></listitem><listitem><para>Open Line, Open Column</para></listitem><listitem><para>We insert a new table 100&percnt; wide (for the edges) </para></listitem><listitem><para>The width and height characteristics are defined.</para></listitem><listitem><para>line column</para></listitem></itemizedlist><para>We stop on the column because it's here we will insert the table content (In fact opentable is where we start from to close this table!)</para><screen><![CDATA[function CloseTable() {
]]><![CDATA[echo "</td ></tr ></table ></td ></tr ></table > \n";
]]><![CDATA[}
]]></screen><para>In fact...</para><itemizedlist><listitem><para>The function is opened</para></listitem><listitem><para>You close Column, You close Line</para></listitem><listitem><para>You close Inner Table</para></listitem><listitem><para>You close Column, You close Line</para></listitem><listitem><para>You close External Table</para></listitem></itemizedlist><para>Its easy to construct HTML functions with PHP, isnt it?</para></sect1>
<sect1 id="template"><title>Modifying the HTML template</title><sect2><title>Example creation of HTML file to include in the theme</title><para>We will not analyse the HTML syntax of all the files, I think it's better that you understand the principles that are used and that you learn a few tricks that allow you to use a visual editor such as DreamWeaver<indexterm><primary>DreamWeaver</primary></indexterm>. </para><variablelist><varlistentry><term>Example:
</term><listitem><para>The block is created in this way: </para><screen><![CDATA[<table border="0 "cellpadding="1" cellspacing="0 "bgcolor="#000000" width="150 "><tr><td>
]]><![CDATA[<table border="0 "cellpadding="3" cellspacing="0 "bgcolor="#dedebb" width="100% "><tr>< td align="left" >
]]><![CDATA[<font class="content "color="#363636" ><b> $$title </b ></font>
]]><![CDATA[</td></tr></table></td></tr></table>
]]><![CDATA[<table border="0 "cellpadding="0" cellspacing="0 "bgcolor="#ffffff" width="150 " >
]]><![CDATA[<tr valign="top "><td bgcolor="#ffffff">
]]><![CDATA[$content
]]><![CDATA[</td></tr></table>
]]><![CDATA[< br >
]]></screen></listitem></varlistentry></variablelist><para>As you see, we create a table of fixed width (in our case 150) and we assign it some colours (for the background etc...). We also assign two variables (&dollar;title and &dollar;content) that will, once included in theme.php, load the title and the content of the block. It would have been useful, for a code cleaning reason, to define background values in the css<indexterm><primary>css</primary></indexterm> tables instead.</para><para>To have all the necessary cases to get the conclusions of this chapter and to write a pair of rules, we have to analyse a very simple module that includes a case we have still not mentioned, the images management:</para><screen><![CDATA[</td><td><img src="themes/NukeNews/images/pixel.gif "width="15" height="1 "border="0" stop = "">
]]><![CDATA[</td><td valign="top" width="100%">
]]></screen><para>The analysed code is a spacer that adds a space of 15 pixels, but where do we go to recover the image? Which path do we have to assign it? Remember that the theme.php file is included in root, so the image path must start from root to the indicated theme. The path to the image &quot;pixel.gif&quot; is &quot;themes/NukeNews/images/pixel.gif&quot; </para><caution>
<title>Attention!</title>
<para>
When you add images in an automatic way by using a visual editor,  the path will be only images/image.gif, and you will have to correct it by hand adding the correct path. 
</para>
</caution>
<para>Another device is to assign, in theme.php, is a variable to the name of the theme to make it independent from eventual changes of the folder name. So for variable &dollar;nameoftheme = &quot; the NukeNews &quot; the image route syntax will be: </para><screen><![CDATA[<img src="themes/$nameoftheme/images/pixel.gif">
]]></screen></sect2>
</sect1>
<sect1 id="theme-rules"><title>Theme construction: the rules to follow </title><para>Considering that the example is always on NukeNews, I suggest you always use this theme as an example, by using the HTML template without directly inserting too many tags in the PHP code, you save time and increase the sites stylistic effect by easily making changes across your site.</para><orderedlist><listitem><para>When you add images in an automatic way by using a visual editor, the path will be only images/image.gif, and you have to correct it by hand with the right path.</para></listitem><listitem><para>You can insert variables in the HTML that will then be called by PHP - it is important that they are inserted in the global part of the function that will include the file.</para></listitem><listitem><para>The visual editor has the defect to open and close the tables, correcting what it thinks is an error. Pay attention because sometimes, in the html files we use, a table is not closed because it will be closed by the successive html file. For example, as often happened, DreamWeaver would close a header by making a mistake in the tables. The header must be closed in the following way:</para><screen><![CDATA[<td bgcolor="#ffffff "width="150" valign="top ">
]]></screen><para>Where this table is that one that includes the right blocks.</para></listitem></listitem><listitem><para>Try to validate the code as much as possible and to use the style sheets<indexterm><primary>style sheets</primary></indexterm> as much you can. In this way you will save a lot of time when you will modify colors, fonts etc... In order to validate the code go to <ulink url="www.w3c.org">www.w3c.org</ulink></para></listitem></orderedlist></sect1>
</chapter>
<chapter id="blocks"><title>Creating blocks</title><sect1 id="block-types"><title>The characteristics of the various types of blocks</title><para>There are 3 different types of PHP-Nuke blocks<indexterm><primary>block creation</primary></indexterm>:</para><itemizedlist><listitem><para>RSS/RDF: They capture news that's available from other sites in standard reading format, i.e. text (For example the site <ulink url="www.spaghettibrain.com">spaghettibrain</ulink> has a lot of news that are at other sites' disposal).</para></listitem><listitem><para>Blocks of contents: blocks in which we insert simple text or HTML text that will be then displayed inside the block (See following example)</para></listitem><listitem><para>Blocks of files: They are PHP scripts that execute fixed commands (see <xref linkend="block-creation">)</para></listitem></itemizedlist><para>In this paragraph we will see a simple example of how to insert the links and the text in a text block. If you already know a little HTML there is no point in following this example.</para><para>We suppose you want to insert a block with text and a link to 3 different sites:</para><para>The Webmaster who wrote this book manages the following sites:</para><itemizedlist><listitem><para><ulink url="http://www.spaghettibrain.com">spaghettibrain.com</ulink></para></listitem><listitem><para><ulink url="http://www.spaghettiopen.com">spaghettiopen.com</ulink></para></listitem><listitem><para><ulink url="http://www.spaghettipython.com">spaghettipython.com</ulink></para></listitem></itemizedlist><para>The text will be formatted in this way in order to be inserted in the block (see <xref linkend="fig-block-example">):</para><screen><![CDATA[<B> webmaster </b> who writes  this book manages the following sites: <b ><br>
]]><![CDATA[<a href="http://www.spaghettibrain.com">spaghettibrain.com</a>
]]><![CDATA[<a href ="http://www.claudioerba.com">claudioerba.com</a>
]]></screen><para>
<figure id="fig-block-example">
   <title>
   Block example
   </title>
   <mediaobject>
      <![ %output.print.png; [
      <imageobject>
         <imagedata fileref="./images/&graph1019;.png" format="PNG">
      </imageobject>
      ]]>
      <![ %output.print.pdf; [
      <imageobject>
         <imagedata fileref="&graph1019;.pdf" format="PDF" scale="65">
      </imageobject>
      ]]>
      <![ %output.print.eps; [
      <imageobject>
         <imagedata fileref="&graph1019;.eps" format="EPS">
      </imageobject>
       ]]>
      <![ %output.print.bmp; [
      <imageobject>
         <imagedata fileref="&graph1019;.bmp" format="BMP">
      </imageobject>
       ]]>
      <textobject>
         <phrase>Block example</phrase>
      </textobject>
      <caption>
         <para>Block example</para>
      </caption>
   </mediaobject>
</figure>
</para><para>Some Small HTML lessons:</para><variablelist><varlistentry><term>&lt;b&gt;
</term><listitem><para>It is for bold text, it opens a tag. All words that we write after this tag will be bold until &lt;/B&gt; (which closes the tag).</para></listitem></varlistentry><varlistentry><term>&lt;br&gt;
</term><listitem><para>It is for a page break, it does not need to be closed.</para></listitem></varlistentry><varlistentry><term>&lt;ahref=&quot;http://siteyouwant.com&quot;&gt;SiteName&lt;/a&gt;
</term><listitem><para>is used to open the http://siteyouwant.com.</para></listitem></varlistentry></variablelist></sect1>
<sect1 id="block-creation"><title>How to create a new block</title><para>To create a block of the third type, i.e. a php script that interfaces with the database and extrapolates the data, first of all we have to understand how these blocks are structured. They are contained in a folder called blocks, the name of the block must be block-blockname.php. It is very important all blocks start with &quot;block-&quot; . Every block in which the name will start with block- will be included in the screen of the blocks that can be activated. We will find in the blocks administration menu all the available blocks in the file_name drop-down list. If not assigned by the administrator, the name will be the same that follows block- We can't use break spaces in a block name, they must be replaced by using underscore _ . All the blocks that will respect these rules will be inserted in the blocks admin menu.</para><sect2><title>How to create a block, theoretical approach:<anchor id="block-theory"></title><para>You have to follow these rules when creating a block:</para><itemizedlist><listitem><para>In every block you create you have to insert the following code at the beginning:</para><screen><![CDATA[if (eregi("block-Name_of_Block.php", $PHP_SELF)) {
]]><![CDATA[Header("Location: index.php");
]]><![CDATA[die();
]]><![CDATA[}
]]></screen><para>By using this code you protect the file avoiding users approaching it directly from the blocks folder, and the block will be displayed only when selected from your site. </para></listitem></listitem><listitem><para>In the blocks you can include everything you want, Perl<indexterm><primary>Perl</primary></indexterm>, java<indexterm><primary>java</primary></indexterm>, php, flash<indexterm><primary>flash</primary></indexterm> etc...</para></listitem><listitem><para>All the block output must have a value that can be obtained from the variable &dollar;content.</para></listitem></itemizedlist><para>Remember that you have a limited amount of space in the block, pay special attention to the layout!</para><warning>
<title>
Warning
</title>
<para>
In order to have W3C standard compatible blocks, Francisco Burzi says:
<blockquote><para>&quot;To respect the W3c standards<indexterm><primary>HTML standards</primary></indexterm> for HTML 4.01 Transitional, it is very important that you replace all &quot;instances of &amp;&quot; in the URL by the tag &quot;&amp;amp; &quot; </para></blockquote>For example the URL:
<screen><![CDATA[<a href="modules.php?op=modload&name=FAQ&file=index">
]]></screen>must be written:
<screen><![CDATA[<a href="modules.php?op=modload&amp;name=FAQ&amp;file=index">
]]></screen>and don't use, for example, the tag "li" (used to create a list), but leave that in the style sheet (CSS) which will make it for you.
</para>
</warning>
<para>The background for the tables and font etc., are better left to the style sheet (CSS).</para><para>We will now see how to construct a block starting from the beginning.</para></sect2>
<sect2 id="block-practice"><title>How to create a block, a practical example</title><para>We will make a very simple block that shows the pages visited in our site the day before. We'll have a single query and a single value, in order to make things easier. Our block is called &quot;hits&quot;, so the complete name of the block will be block-hits.php</para><para>First of all, we open the php tag</para><screen><![CDATA[<?php
]]></screen><para>Then we insert the protection script we've seen before:</para><screen><![CDATA[if (eregi("block-hits.php", $PHP_SELF)) {
]]><![CDATA[Header("Location: index.php");
]]><![CDATA[die();
]]><![CDATA[}
]]></screen><para>And now we insert the variables that we want to call (in this case the parameter &dollar;prefix and &dollar;dbi, which handles the database abstraction): </para><screen><![CDATA[global $prefix, $dbi;
]]></screen><para>Now we continue inserting the query that reads from the database how many pages were seen in our site: (the instruction would be &quot;read the first line value of the table nuke_counter in the cell count&quot;) </para><screen><![CDATA[$result = sql_query("select count from "$prefix."_counter order by type desc limit 0.1", $dbi);
]]><![CDATA[list($count) = sql_fetch_row($result, $dbi);
]]></screen><para>Finally, we pass the &quot;&dollar;content<indexterm><primary>$content</primary></indexterm>&quot; variable that will be echoed by the block and close the PHP tag: </para><screen><![CDATA[$content. = $count
]]><![CDATA[?>
]]></screen><para>Our complete script will be :</para><screen><![CDATA[<?php
]]><![CDATA[if (eregi("block-hits,php", $PHP_SELF)) {
]]><![CDATA[Header("Location: index.php");
]]><![CDATA[die();
]]><![CDATA[}
]]><![CDATA[global $prefix, $dbi;
]]><![CDATA[$result = sql_query("select count from "$prefix."_counter order by type desc limit 0.1", $dbi);
]]><![CDATA[list($count) = sql_fetch_row($result, $dbi);
]]><![CDATA[$content. = $count
]]><![CDATA[?>
]]></screen></sect2>
</sect1>
</chapter>
<chapter id="creating-modules"><title>Creating modules</title><sect1 id="module-structure"><title>Module structure </title><para>The PHP-Nuke modules<indexterm><primary>module creation</primary></indexterm> are PHP-written applications that manage the central part of the site. For example, the &quot;News&quot;, &quot;Forum&quot;, &quot;Members List&quot; etc. are all modules. Each module, based on it's complexity, is structured using one part for the user's and another for the administrator, in this case there are some contents we have to modify. It's all managed from the modules.php file which alone, carries out the job of authentication and management of the access rights on that module. The modules.php file checks and verifies if the module was activated or not, and verifies the access rights. This saves us a lot of work because we don't have to insert these controls in every module we create.</para><para>We refer you to what is written in <xref linkend="module-management"> to be more exhaustive.</para><para>For example in the avantgo module, in order to load the index.php file, it's enough to pass the module name to the parameter string, the file that will be searched for is index.php.</para><screen><![CDATA[modules.php?name=AvantGo
]]></screen><para>If instead we wanted to call a page different from the default index.php (say, print.php), the string we will have to pass is :</para><screen><![CDATA[modules.php?name=AvantGo & file=print
]]></screen><para>That is the file variable with a value (print) that corresponds to the name of the file we want to load without the .php extension. </para><para>Inside of the folder modules/nameofmodule there is also a subfolder called &quot;language&quot;. In this fashion we manage in a simple and immediate way the multilanguage functionality inside the modules.</para><para>The rows modules.php work in this way:</para><itemizedlist><listitem><para>It includes the mainfile.php</para></listitem><listitem><para>Verifies if the module is active</para></listitem><listitem><para>Verifies whether the string passes a file name different from index.php</para></listitem><listitem><para>Verifies the permissions of the module (whether everybody can see it, or only registered users, or only the administrator).</para></listitem></itemizedlist></sect1>
<sect1 id="module-rules"><title>Creating fully compatible modules: the rules to follow</title><para>For people who have a base knowledge of the PHP language it is very simple to construct a module. Generally to create a PHP-Nuke module means:</para><itemizedlist><listitem><para>To create PHP files for the users, ie the public part of the site</para></listitem><listitem><para>To create an administrator interface </para></listitem><listitem><para>To verify that everything we have created is in keeping with the PHP-Nuke development rules.</para></listitem></itemizedlist><para>But what about the development rules<indexterm><primary>module creation: rules</primary></indexterm>? </para><para>It is a good idea to stop on this point before continuing on to the programming part.</para><orderedlist><listitem><para>Rule: the modules must be included in the folder modules/namemodule in the public part and the folder admin/modules in the administration part</para></listitem><listitem><para>Rule: the main file of the module included in modules/nameofmodule must be called index.php</para></listitem><listitem><para>Rule: the tables in the php syntax are indicated by prefix. For example Nuke pages will be indicated with &quot;&dollar;prefix.&quot;_pages, where &dollar;prefix takes the value from the config.php file which is nuke by default.</para></listitem><listitem><para>Rule: the location of the images or links must start from the root of your html directory and not from the folder modules/nameofmodule because the files contained in it are included in a file placed in html's root directory that's called modules.php</para></listitem><listitem><para>Rule: to manage the multilanguage function in an optimal way we have to create some text abstractions that we will insert in the files by making a folder called &quot;language&quot; inside the folder of the module. Everything will then be automatically recalled. For example, if we need to create a module that we call Topolino (the Italian name of Mickey Mouse) we must give the possibility to those who use the Italian interface to read &quot;Topolino&quot; and to those who use the English one to read &quot;Mickey Mouse&quot; ; -).</para></listitem></orderedlist><para>How do we do it?</para><para>First of all we create the folder &quot;language&quot; inside the folder modules/topolino We insert in this folder two php files that we will call lang-italian.php and lang-english.php<indexterm><primary>lang-xxx.php</primary></indexterm> We create an abstraction<indexterm><primary>language abstraction</primary></indexterm> for topolino, in the lang-italian.php it will be: </para><screen><![CDATA[define("_TOPO", "Topolino");
]]></screen><para>And in English it will be:</para><screen><![CDATA[define("_TOPO", "Mickey Mouse");
]]></screen><para>In this way inserting in the module the abstraction &quot;_TOPO&quot; this will be automatically replaced by Topolino in the Italian interface and by Mickey Mouse in the English interface.</para></sect1>
<sect1 id="module-public"><title>Module creation, the public part</title><para>We continue using the example of Topolino from <xref linkend="module-rules"> and create a very simple module that displays a GIF of Topolino with a list of 3 predefined names that are editable by the users. This is a nonsense module but it's simple enough to be understood by everybody. The DB we will use is MySQL, but the example, by changing some detail, works with all DB's. First of all let's see the skeleton of every module that we will construct:</para><screen><![CDATA[<?php
]]><![CDATA[if (!eregi("modules.php", $PHP_SELF)) {
]]><![CDATA[die ("You can't access this file directly...");
]]><![CDATA[}
]]><![CDATA[$index = 1;
]]><![CDATA[require_once("mainfile.php");
]]><![CDATA[$module_name = basename(dirname(__FILE__));
]]><![CDATA[get_lang($module_name);
]]><![CDATA[include("header.php");
]]><![CDATA[include("footer.php");
]]><![CDATA[?> 
]]></screen><important>
<para>
Before making anything it's necessary to create a folder called "modules/Topolino", the file we have just created (with the other contents) must be called index.php and must stay in that folder.  
</para>
</important>
We create a table in the database called nuke_topolino that is structured in this way:
<itemizedlist><listitem><para>idperson: It is a cell that contains the id of person (int 11, primary)</para></listitem><listitem><para>nameperson: It is a cell that contains the names of the people (varchar 60)</para></listitem></itemizedlist><para>And we manually insert (by using PHPMyAdmin<indexterm><primary>PHPMyAdmin</primary></indexterm> - see <xref linkend="phpmyadmin2"> - or an equivalent interface) the names of the 3 people we are interested in, see <xref linkend="fig-inserting-values"> (the module, for simplicity reasons doesn't allow you to add or to cancel people but only editing those that already exist).</para><itemizedlist><listitem><para>Id 1: Topolino</para></listitem><listitem><para>Id 2: Minnie</para></listitem><listitem><para>Id 3: Pluto</para></listitem></itemizedlist><para>
<figure id="fig-inserting-values">
   <title>
   PHPMyAdmin: inserting values
   </title>
   <mediaobject>
      <![ %output.print.png; [
      <imageobject>
         <imagedata fileref="./images/&graph1020;.png" format="PNG">
      </imageobject>
      ]]>
      <![ %output.print.pdf; [
      <imageobject>
         <imagedata fileref="&graph1020;.pdf" format="PDF" scale="65">
      </imageobject>
      ]]>
      <![ %output.print.eps; [
      <imageobject>
         <imagedata fileref="&graph1020;.eps" format="EPS">
      </imageobject>
       ]]>
      <![ %output.print.bmp; [
      <imageobject>
         <imagedata fileref="&graph1020;.bmp" format="BMP">
      </imageobject>
       ]]>
      <textobject>
         <phrase>PHPMyAdmin: inserting values</phrase>
      </textobject>
      <caption>
         <para>PHPMyAdmin: inserting values</para>
      </caption>
   </mediaobject>
</figure>
</para><note>
<para>
It's possible to include the footer at the end of every function. It's a solution that is a bit more complex because we must write more lines, but I have to stress how much alot of modules use it.
</para>
</note>
Once that the table of the DB is ready we can begin to enjoy creating the code that will give us back our output. Our output will be one simple query <indexterm><primary>query</primary></indexterm> with a cycle that will give back  the values inserted in the database (the simplest thing in the world, Gosh!).
<caution>
<title>
Attention!!!
</title>
<para>
To maintain the abstraction of the DB so that it can work on various database's in an independent way, we cannot use classic PHP syntax that is generally used by the MySQL addicted ; -), instead we must use the syntax illustrated in the file include/sql_layer.php<indexterm><primary>sql_layer.php</primary></indexterm>
</para>
</caution>
<para>The query that we will compile will be structured in the following way:</para><screen><![CDATA[$resultpersons = sql_query("SELECT idperson, nameperson FROM "$prefix."_topolino", $dbi);
]]><![CDATA[for ($m=0; $m < sql_num_rows($resultpersons, $dbi); $m++)
]]><![CDATA[{
]]><![CDATA[list($idperson, $nameperson) = sql_fetch_row($resultpersons, $dbi);
]]><![CDATA[echo "$idperson - $nameperson < br >";
]]><![CDATA[}
]]></screen><para>Very simple, isn't it? OK!, before passing to the administrator's interface for this module, we will start to modify it with the intention of giving it a minimum style dignity.</para><para>I would propose:</para><itemizedlist><listitem><para>to insert <indexterm><primary>insert, in a table</primary></indexterm>the results in a table </para></listitem><listitem><para>to put a title to it and a description for the module.</para></listitem></itemizedlist><para>We can do this by rendering all of the module's compatible with the multilanguage system of PHP-Nuke: We define the abstractions that will compose the two phrases we need, in the file lang-english.php we have to insert:</para><screen><![CDATA[<?php
]]><![CDATA[define("_BENVETOPOMOD", "Topolino Module, Welcome!");
]]><![CDATA[define("_DESCRITOPOMOD", "This is an example module that serves to illustrate how a PHP-Nuke module is created");
]]><![CDATA[>
]]></screen><para>Remember to insert a file called index.htm in our language folder! We need it to protect the inside of that folder from undesired navigations. We are nearly at the end of the frontend part, now we have to insert the stylistic part in the code that we have created and to assemble everything. We take two code pieces previously constructed (The initial one and the one created by us) and we join the stylistic modification:</para><screen><![CDATA[<?php if (!eregi("modules.php", $PHP_SELF)) 
]]><![CDATA[{ die ("You can't access this rows directly..."); } 
]]><![CDATA[$index = 1; require_once("mainfile.php"); 
]]><![CDATA[$module_name = basename(dirname(__FILE__)); 
]]><![CDATA[get_lang($module_name); 
]]><![CDATA[include("header.php"); 
]]><![CDATA[echo "<br>"; 
]]><![CDATA[echo""._BENVETOPOMOD.""; 
]]><![CDATA[echo "<br><br>"; 
]]><![CDATA[opentable();
]]><![CDATA[echo "<br>"; 
]]><![CDATA[echo""._DESCRITOPOMOD.""; 
]]><![CDATA[echo "<br><br>"; 
]]><![CDATA[$resultpersons = sql_query("SELECT idperson, nameperson FROM ".$prefix."_topolino", $dbi);
]]><![CDATA[for ($m=0; $m < sql_num_rows($resultpersons, $dbi); 
]]><![CDATA[$m++) { list($idperson, $nameperson) = sql_fetch_row($resultpersons, $dbi); echo "$idperson - $nameperson <br>";
]]><![CDATA[} 
]]><![CDATA[closetable();
]]><![CDATA[include("footer.php");
]]><![CDATA[?>
]]></screen><para>We have only added text, some breaks for the headers and an &quot;Opentable()<indexterm><primary>Opentable</primary></indexterm>;&quot; and a &quot;Closetable()<indexterm><primary>Closetable</primary></indexterm>;&quot; to include the text. The result can be seen in <xref linkend="fig-example-module"></para><para>
<figure id="fig-example-module">
   <title>
   Example module
   </title>
   <mediaobject>
      <![ %output.print.png; [
      <imageobject>
         <imagedata fileref="./images/&graph1021;.png" format="PNG">
      </imageobject>
      ]]>
      <![ %output.print.pdf; [
      <imageobject>
         <imagedata fileref="&graph1021;.pdf" format="PDF" scale="65">
      </imageobject>
      ]]>
      <![ %output.print.eps; [
      <imageobject>
         <imagedata fileref="&graph1021;.eps" format="EPS">
      </imageobject>
       ]]>
      <![ %output.print.bmp; [
      <imageobject>
         <imagedata fileref="&graph1021;.bmp" format="BMP">
      </imageobject>
       ]]>
      <textobject>
         <phrase>Example module</phrase>
      </textobject>
      <caption>
         <para>Example module</para>
      </caption>
   </mediaobject>
</figure>
</para></sect1>
<sect1 id="module-admin"><title>Module creation, administrator part</title><para>It's time to create the administration part of the module<indexterm><primary>module creation</primary></indexterm>. In this very simple module the only function that will work on the DB will be the one in which we can modify the text of one of the three languages that we have created. First of all, we have to create the files to insert in the folders:</para><itemizedlist><listitem><para>admin/case<indexterm><primary>case</primary></indexterm></para></listitem><listitem><para>admin/links</para></listitem><listitem><para>admin/modules </para></listitem></itemizedlist><para>It's important to remember how much we have just said in <xref linkend="directory-structure">:</para><variablelist><varlistentry><term>Admin<indexterm><primary>Admin</primary></indexterm>:
</term><listitem><para>contains 4 subdirectories (links, language, case, modules) that manage the various administration modules. The folder that holds the files is modules/admin/ .</para></listitem></varlistentry></variablelist><para>The folder admin/links<indexterm><primary>admin/links</primary></indexterm> instead says that the admin module must recall and position one language in admin for that determined module.</para><para>Example (Administration for the FAQ module):</para><screen><![CDATA[if (($radminsuper==1) OR ($radminfaq==1)) {
]]><![CDATA[adminmenu("admin.php?op=FaqAdmin ", "" _FAQ." ", "faq.gif");
]]><![CDATA[}
]]></screen><para>This module:</para><itemizedlist><listitem><para>Verifies the administration rights (This module can be set up so it can be viewed by the superadmin or an admin)</para></listitem><listitem><para>It passes a &quot;CASE&quot; (op=FaqAdmin) that indicates to the admin.php file (that includes all the admin modules) the module to call, associates a value in order to translate the term &quot;FAQ&quot; and associates an image for the visual administration (faq.gif).</para></listitem></itemizedlist><para>The folder admin/case<indexterm><primary>admin/case</primary></indexterm> instead serves to define the module to be used in each specified case . This is important when, using the same admin file, we need to perform more operations using a CASE<indexterm><primary>CASE statement</primary></indexterm> statement:</para><screen><![CDATA[case1 = insert
]]><![CDATA[case2 = cancel
]]><![CDATA[etc...
]]></screen><para>In fact it says which module to call in order to verify the CASE<indexterm><primary>CASE</primary></indexterm> condition. For example, in the FAQ<indexterm><primary>FAQ</primary></indexterm> module there are lots of cases, here are the last 2:</para><screen><![CDATA[case "FaqAdmin":
]]><![CDATA[case "FaqCatGo":
]]><![CDATA[include ("admin/modules/adminfaq.php");
]]><![CDATA[break;
]]></screen><para>Both of the CASE statements call the adminfaq.php file, but they are used for different operations. The first one calls the file with the default scheme, the second, on the other hand, gives its O:K. to insert a new category. </para><para>This happens through a string like &quot;admin.php?op=FaqAdmin&quot; in the first case and &quot;admin.php?op=FaqCatGo&quot; in the second.</para><para>We will now create, in the following order, the files:</para><itemizedlist><listitem><para>admin/modules/topolino.php</para></listitem><listitem><para>admin/case/case.topolino.php</para></listitem><listitem><para>admin/links/links.topolino.php </para></listitem></itemizedlist><para>In order to create the file inside the modules folder (modules/topolino.php) we must have a structure of this type:</para><itemizedlist><listitem><para>Starting part of the file (Similar for all the modules)</para></listitem><listitem><para>Definition of the necessary functions.</para></listitem><listitem><para>Definition of the necessary cases in order to call the various functions for the admin module.</para></listitem><listitem><para>Final part of the file.</para></listitem></itemizedlist><para>The syntax for the starting part of the file is the following:</para><screen><![CDATA[<?php
]]><![CDATA[if (!eregi("admin.php ", { die ("Access Denied"); }
]]><![CDATA[$result = sql_query("select radminsuper, admlanguage from "$prefix."_authors to where aid=' $aid '", $dbi);
]]><![CDATA[list($radminsuper, $admlanguage) = sql_fetch_row($result, $dbi);
]]><![CDATA[if ($radminsuper==1) {
]]></screen><para>This part of the file controls the administration rights for whoever calls it, a control on which language to use and (not in this module) a control on the administrator's rights. An administrator could have only partial rights of administration on modules or some modules can be managed only by a superadmin. In our specific case the module can be managed only by the superadmin because the control is only:</para><screen><![CDATA[if ($radminsuper==1)
]]></screen><para>In case there are some specific rights (for example in the reviews module) the rights to control would have been:</para><screen><![CDATA[if (($radminreviews==1) OR ($radminsuper==1))
]]></screen><para>Activating the rights on two levels on new modules indeed isn't simple, you must specify in the nuke_authors table a new field that designates the rights, then modify admin/modules/authors.php adding the checkbox for the rights of the new module and modify the corresponding UPDATE<indexterm><primary>UPDATE</primary></indexterm> queries.</para><para>Let's go back to our module, the initial part of the syntax is obligatorily </para><screen><![CDATA[<?php
]]><![CDATA[if (!eregi("admin.php ", { die ("Access Denied"); }
]]><![CDATA[$result = sql_query("select radminsuper from "$prefix."_authors to where aid=' $aid '", $dbi);
]]><![CDATA[list($radminsuper) = sql_fetch_row($result, $dbi);
]]><![CDATA[if ($radminsuper==1) {
]]><![CDATA[and that end is instead:
]]><![CDATA[} else {
]]><![CDATA[echo "Access Denied";
]]><![CDATA[}
]]><![CDATA[>
]]></screen><para>All that we find in the middle, are the management functions and the cases that must be checked, which we will now go on to construct. There are a couple of rules to follow in order to construct the admin functions:</para><itemizedlist><listitem><para>We must include a header at the beginning of the function and a footer at the end:</para><screen><![CDATA[include("header.php");
]]><![CDATA[include("footer.php");
]]></screen></listitem></itemizedlist><para>We have to include the GraphicAdmin(); function immediately after the header. It will display the navigation panel that leads to all the other admin links. The functions we'll now go to create are:</para><itemizedlist><listitem><para>Display of the database records</para></listitem><listitem><para>Selection of the record and its insertion in a modifiable text field</para></listitem><listitem><para>Modification of the record through insertion in the database of the value modified in the text field.</para></listitem></itemizedlist><para>Here is the code of the function which accomplishes the record selection:</para><screen><![CDATA[function mousedisplay() {
]]><![CDATA[global $admin, $bgcolor2, $prefix, $dbi, $multilingual;
]]><![CDATA[include ("header.php");
]]><![CDATA[GraphicAdmin();
]]><![CDATA[Opentable();
]]><![CDATA[$resultpersons = sql_query("SELECT idperson, nameperson FROM ".$prefix."_topolino", $dbi);
]]><![CDATA[for ($m=0; $m < sql_num_rows($resultpersons, $dbi); $m++)
]]><![CDATA[{
]]><![CDATA[list($idperson, $nameperson) = sql_fetch_row($resultpersons, $dbi);
]]><![CDATA[echo "$idperson - $nameperson < to href=\"admin.php=mouseselect & idtopo=$idperson \" > Select mouse </to > < br > ";
]]><![CDATA[}
]]><![CDATA[closetable();
]]><![CDATA[include("footer.php");
]]><![CDATA[}
]]></screen><para>The next function to implement is the one that corresponds to the selection of one of the three records:</para><screen><![CDATA[function mouseselect() {
]]><![CDATA[global $admin, $bgcolor2, $prefix, $dbi, $multilingual, $idtopo;
]]><![CDATA[include ("header.php");
]]><![CDATA[GraphicAdmin();
]]><![CDATA[Opentable();
]]><![CDATA[$resultpersons = sql_query("SELECT idperson, nameperson FROM "$prefix."_topolino to where idperson=' $idtopo '", $dbi);
]]><![CDATA[for ($m=0; $m < sql_num_rows($resultpersons, $dbi); $m++)
]]><![CDATA[{
]]><![CDATA[list($idperson, $nameperson) = sql_fetch_row($resultpersons, $dbi);
]]><![CDATA[echo "< form action=\"admin.php\" method=\"post\">";
]]><![CDATA[echo "< input type=\"text\" name=\"nameperson \ "size=\"20\" maxlength=\"20 \ "value=\"$personname \" >< br >< br > ";
]]><![CDATA[echo "< input type=\"hidden\" name=\"idperson\"value=\"$idtopo\" > ";
]]><![CDATA[echo "< input type=\"hidden\" name=\"op \ "value=\"mousemodify\" > ";
]]><![CDATA[echo "< input type=\"submit\" value=\""._ADDTOPO."\" > ";
]]><![CDATA[echo "</form >";
]]><![CDATA[}
]]><![CDATA[closetable();
]]><![CDATA[include("footer.php");
]]><![CDATA[}
]]></screen><para>It is very important to take note of some things:</para><orderedlist><listitem><para>The variables that we insert will be checked, in fact you can see the variable &quot;&dollar;idtopo&quot; was inserted between the used variables. </para></listitem><listitem><para>The value checked in the CASE statements is passed to us through a hidden form field</para></listitem></orderedlist><screen><![CDATA[(< input type=\"hidden\"name=\"op\"value=\"mousemodify\">).
]]></screen><para>The last function we consider is the one that corresponds to the update of the values in the database (Here too we added the two variables that we were interested in (&dollar;nameperson, &dollar;idperson): </para><screen><![CDATA[function mousemodify() {
]]><![CDATA[global $admin, $bgcolor2, $prefix, $dbi, $multilingual, $idtopo, $nameperson, $idperson;
]]><![CDATA[include ("header.php");
]]><![CDATA[GraphicAdmin();
]]><![CDATA[Opentable();
]]><![CDATA[sql_query("update "$prefix."_topolino set nameperson=' $nameperson' where idperson=$idperson", $dbi);
]]><![CDATA[echo"OK ";
]]><![CDATA[die(mysql_error());
]]><![CDATA[closetable();
]]><![CDATA[include("footer.php");
]]><![CDATA[}
]]></screen><para>The last two elements to insert are the definitions for the CASE statements (that is, which function to call according to the variable passed to the module) and the closing of the file. </para><para>Definition of the cases:</para><screen><![CDATA[switch($op) {
]]><![CDATA[case "":
]]><![CDATA[mousedisplay();
]]><![CDATA[break;
]]><![CDATA[case "topolino":
]]><![CDATA[mousedisplay();
]]><![CDATA[break;
]]><![CDATA[case "mouseselect":
]]><![CDATA[mouseselect();
]]><![CDATA[break;
]]><![CDATA[case "mousemodify":
]]><![CDATA[mousemodification();
]]><![CDATA[break;
]]><![CDATA[}
]]><![CDATA[Closing of the file:
]]><![CDATA[} else {
]]><![CDATA[echo "Access Denied";
]]><![CDATA[}
]]><![CDATA[>
]]></screen><para>The cases definition page is very easy to construct, it gathers the cases that are included in the file admin/modules/topolino.php and puts them in the file admin/case/case.topolino.php  </para><para>This is the syntax:</para><screen><![CDATA[<?php
]]><![CDATA[if (!eregi("admin.php ", { die ("Access Denied"); }
]]><![CDATA[switch($op) {
]]><![CDATA[case "topolino":
]]><![CDATA[include("admin/modules/topolino.php");
]]><![CDATA[break;
]]><![CDATA[case "mouseselect":
]]><![CDATA[include("admin/modules/topolino.php");
]]><![CDATA[break;
]]><![CDATA[case "mousemodify":
]]><![CDATA[include("admin/modules/topolino.php");
]]><![CDATA[break;
]]><![CDATA[}
]]><![CDATA[>
]]></screen><para>The last two things we have to make are the compilation of the file admin/links/link.topolino.php and the creation of a language module: Compilation of the file link.topolino.php</para><screen><![CDATA[<?php
]]><![CDATA[if ($radminsuper==1) {
]]><![CDATA[adminmenu("admin.php?op=topolino ", "" _EDITTOPOLINO." ", "topolino.gif");
]]><![CDATA[}
]]><![CDATA[>
]]></screen><para>Where: admin.php?op=topolino defines which module must be called, &quot; _EDITTOPOLINO&quot; is the term to translate (it must be compiled in admin/language). For the modification of the language module I refer you to the previous paragraph with one single note. The language file of the admin section is common for all (admin/language), the relative languages must be added to the end of those that already exist. Just another thing, the syntax of this example is not perfect, its beyond the scope of this to make it work perfectly but it does illustrate the operation of the module (Which you will find available for download at <ulink url="http://www.spaghettibrain.com">www.spaghettibrain.com</ulink> so you will be able to study it).</para></sect1>
</chapter>
<chapter id="security"><title>Some security precautions </title><sect1 id="permissions2"><title>The permissions on the folders and files</title><para>This section is of importance only to those who use PHP-Nuke under Linux/Unix (this is true for the greater part of PHP-Nuke sites that are hosted by providers, and often also those who test locally use Linux).</para><para>Burzi<indexterm><primary>Burzi, Francisco</primary></indexterm> says that the directories should be assigned a mode<indexterm><primary>permissions mode</primary></indexterm> of 777, the files a mode of 666, but we may calmly let our PHP-Nuke do its work under more restrictive permissions<indexterm><primary>permissions</primary></indexterm>, as illustrated below:</para><itemizedlist><listitem><para>config.php (666)</para></listitem><listitem><para>backend<indexterm><primary>backend.php</primary></indexterm>.php (666)</para></listitem><listitem><para>ultramode<indexterm><primary>ultramode.txt</primary></indexterm>.txt (666)</para></listitem><listitem><para>All directories (755)</para></listitem><listitem><para>Other files (644)</para></listitem></itemizedlist><para>The files config.php<indexterm><primary>config.php</primary></indexterm>, backend.php<indexterm><primary>backend.php</primary></indexterm>, ultramode.txt<indexterm><primary>ultramode.txt</primary></indexterm> must have the write permissions because :</para><itemizedlist><listitem><para>For config.php editing the preferences we will write this file modifying the text.</para></listitem><listitem><para>For the backend and ultramode on the other side, we will write them (in an automatic way) modifying the titles and abstracts of the news. </para></listitem></itemizedlist><para>There is however something particular we have to take into account: if we use modules that upload files in some directories, their permissions wil have to be raised. As an example, consider the IndyNews module, a non standard module that makes it possible to enclose files and images in articles. The structure of the module is the following:</para><itemizedlist><listitem><para>modules/indynews/media</para></listitem></itemizedlist><para>In the inside of the &quot;indynews&quot; folder the permissions of the folder &quot;media&quot; would have to be 777, due to an override problem, the 777 permissions will have to be imposed on everything that is below &quot;modules&quot;. For this reason, everything that resides in &quot;modules&quot; will be in 777 mode and this could cause a vulnerability. A solution is to move the folder that will have to accommodate the uploaded files to the outside of the modules folder, even to the document root, changing inside the module all the references to it.</para><para>Doing so will leave one single folder in root with permissions set to 777.</para></sect1>
<sect1 id="cookies"><title>Cookies - timeout and configuration</title><para>PHP-Nuke makes heavy use of cookies<indexterm><primary>cookies</primary></indexterm>, be it for user authentication<indexterm><primary>authentication</primary></indexterm>, or admin authentication. The cookies are text files that are saved on our computers and contain various information that is read when we enter a certain site. In the case of PHP-Nuke the information saved there pertains to the user, the chosen theme and the language used. </para><para>The cookie is also the instrument that enables us not to have to retype the password each time we log in. This way, each time we access a PHP-Nuke site, the cookie works for us by managing the login<indexterm><primary>login</primary></indexterm> operation.</para><para>The problem is that if the cookie does not have an expiry<indexterm><primary>expiration</primary></indexterm> date low enough, someone can to steal it from us and be able to access the site as a user or administrator. This is possible for a series of reasons:</para><orderedlist><listitem><para>the cookie of PHP-Nuke has a life duration close to infinite (31536000 seconds)</para></listitem><listitem><para>Explorer<indexterm><primary>Explorer</primary></indexterm> (most used browser, unfortunately) has vulnerabilities that allow the execution of malicious<indexterm><primary>malicious scripts</primary></indexterm> scripts on the client that &quot;steal&quot; the cookie from the user and send it to the &quot;burglar&quot;.</para></listitem><listitem><para>PHP-Nuke does not succeed in filtering<indexterm><primary>filtering</primary></indexterm> all the malicious<indexterm><primary>malicious scripts</primary></indexterm> scripts (or, to put it better, Internet Explorer is so stupid that corrects inserted scripts with the wrong syntax in order not to be recognized).</para></listitem></orderedlist><para>Let's show a concrete example of how a script<indexterm><primary>script kiddie</primary></indexterm> kiddie (those who hold themselves for hackers<indexterm><primary>hackers</primary></indexterm>, but they are not...) can try to obtain administrator rights on our site:</para><orderedlist><listitem><para>The script kiddie inserts a script that supposedly contains news: </para><screen><![CDATA[< vb script give the cookie to me and send it to the server xyz>
]]></screen><para>that is not filtered by the function check_words() of PHP-Nuke.</para></listitem></listitem><listitem><para>The administrator of PHP-Nuke opens the page up with Internet Explorer!!! (This hack does not work if you're using Mozilla<indexterm><primary>Mozilla</primary></indexterm>, or better yet any Linux browser). The list of the news waiting to be approved for publishing is seen by the administrator. When he goes to look at the Submissions, Internet Explorer (stupidly) corrects the vbscript in this way: </para><screen><![CDATA[<vbscript>(script kiddies commands go here)
]]></screen><para>succeeding to interpret the wrong syntax in the correct way (!!!), taking the cookie and sending it to the script kiddie.</para></listitem></listitem><listitem><para>The script kiddie puts the cookie among the other ones of his own, connects to the site and... is recognized as being the administartor!!!</para></listitem></orderedlist><para>But how is it possible to protect ourselves from this type of hack?</para><para>There are some solutions that should increase much of the security for our administration area:</para><orderedlist><listitem><para>First of all STOP using Internet Explorer<indexterm><primary>Explorer</primary></indexterm> as a browser and pass the seat to <ulink url="http://www.mozilla.org">Mozilla</ulink>. Mozilla is a browser that supports all sites in an optimal way and is not plagued by all the vulnerabilities of Microsoft. If you use Linux instead you won't encounter any problems of this sort...</para><orderedlist><listitem><para>In case you want to continue to use the Explorer, you should at least download the patches from <ulink url="http://www.microsoft.com">Microsoft</ulink>.</para></listitem></orderedlist></listitem><listitem><para>Disable, where possible, the insertion of HTML<indexterm><primary>HTML tags (security)</primary></indexterm> tags (for example in the forum of Splatt.it)</para></listitem><listitem><para>Narrow down the life of cookies. If for example we set up the life of the cookie to two hours, the script kiddie will be forced to use the cookie within that period, this limits much of their ability to act in time.</para><para>If instead we leave the life of the cookie to its preset value, the script kiddie may use our cookie even for 1 month after it was stolen.</para><para>How to set up the duration of the administartor cookie? The cookie is set up in the file includes/auth.php and the function to modify it is the following:</para><screen><![CDATA[if ((isset($aid)) && (isset($pwd)) && ($op == "login")) {
]]><![CDATA[    if($aid! = "" AND $pwd!="") {
]]><![CDATA[        $pwd = md5($pwd);
]]><![CDATA[        $result=sql_query("select pwd, admlanguage from "$prefix."_authors  where aid='$aid'", $dbi);
]]><![CDATA[        list($pass, $admlanguage)=sql_fetch_row($result, $dbi);
]]><![CDATA[        if($pass == $pwd) {
]]><![CDATA[            $admin = base64_encode("$aid:$pwd:$admlanguage");
]]><![CDATA[            setcookie("admin", "$admin",time()+7200);
]]><![CDATA[            unset($op);
]]><![CDATA[        }
]]><![CDATA[    }
]]><![CDATA[}
]]></screen><para>As you see we have modified the life duration of the second cookie from 2592000 (a month) to 7200 seconds (two hours). As you can easily see, we have reduced the action radius of the script kiddie down from one month to two hours.</para></listitem></listitem><listitem><para>A much more effective tag filter is in the study phase, although for the moment, the proposed solutions did give a definitive answer to the problem. The admissible tags are defined in in the file config.php in the variable &dollar;AllowableHTML<indexterm><primary>$AllowableHTML</primary></indexterm>, these are valid for the comments and the insertion of news in the function check_html()<indexterm><primary>check_html</primary></indexterm> which for the moment lets some tags pass through.</para></listitem></orderedlist><para>All these actions and a correct configuration of the permissions as illustrated in <xref linkend="permissions2"> should guarantee us a good security for our site. It is also important to closely follow the security warnings for PHP-Nuke that are brought up on <ulink url="http://neworder.box.sk/">http://neworder.box.sk/</ulink>.</para></sect1>
</chapter>
<chapter id="tools"><title>Programmer's tools </title><sect1 id="database-tables"><title>The database tables </title><para>Here are the tables<indexterm><primary>tables</primary></indexterm> that comprise the PHP-Nuke database and what they serve for:</para><variablelist><varlistentry><term>nuke_access<indexterm><primary>nuke_accessi</primary></indexterm>:
</term><listitem><para>Defines various users profiles.</para></listitem></varlistentry><varlistentry><term>nuke_authors<indexterm><primary>nuke_authors</primary></indexterm>:
</term><listitem><para>Defines the administrators and their access levels.</para></listitem></varlistentry><varlistentry><term>nuke_autonews<indexterm><primary>nuke_autonews</primary></indexterm>:
</term><listitem><para>Manages automatic news.</para></listitem></varlistentry><varlistentry><term>nuke_banlist<indexterm><primary>nuke_banlist</primary></indexterm>:
</term><listitem><para>Manages banned users (those excluded from viewing the site).</para></listitem></varlistentry><varlistentry><term>nuke_banner<indexterm><primary>nuke_banner</primary></indexterm>:
</term><listitem><para>Manages banner campaigns, impressions and clicks.</para></listitem></varlistentry><varlistentry><term>nuke_bannerclient<indexterm><primary>nuke_bannerclient</primary></indexterm>:
</term><listitem><para>Manages the banner campaign clients.</para></listitem></varlistentry><varlistentry><term>nuke_bbtopics<indexterm><primary>nuke_bbtopics</primary></indexterm>:
</term><listitem><para>Manages the BBCode.</para></listitem></varlistentry><varlistentry><term>nuke_blocks<indexterm><primary>nuke_blocks</primary></indexterm>:
</term><listitem><para>List of created blocks.</para></listitem></varlistentry><varlistentry><term>nuke_catagories<indexterm><primary>nuke_catagories</primary></indexterm>:
</term><listitem><para>List of the categories.</para></listitem></varlistentry><varlistentry><term>nuke_comments<indexterm><primary>nuke_comments</primary></indexterm>:
</term><listitem><para>Manages comments and answers.</para></listitem></varlistentry><varlistentry><term>nuke_config<indexterm><primary>nuke_config</primary></indexterm>:
</term><listitem><para>Manages some configurations like the possibility to mail in HTML etc.</para></listitem></varlistentry><varlistentry><term>nuke_counter<indexterm><primary>nuke_counter</primary></indexterm>:
</term><listitem><para>Manages statistics.</para></listitem></varlistentry><varlistentry><term>nuke_disallow<indexterm><primary>nuke_disallow</primary></indexterm>:
</term><listitem><para>Blocks a user.</para></listitem></varlistentry><varlistentry><term>nuke_downloads_categories<indexterm><primary>nuke_downloads_categories</primary></indexterm>:
</term><listitem><para>Manages categories and subcategories for the download area.</para></listitem></varlistentry><varlistentry><term>nuke_downloads_downloads<indexterm><primary>nuke_downloads_downloads</primary></indexterm>:
</term><listitem><para>Manages the files present in the download area.</para></listitem></varlistentry><varlistentry><term>nuke_downloads_editorials<indexterm><primary>nuke_downloads_editorials</primary></indexterm>:
</term><listitem><para>Manages the comments on the files.</para></listitem></varlistentry><varlistentry><term>nuke_downloads_modrequest<indexterm><primary>nuke_downloads_modrequest</primary></indexterm>:
</term><listitem><para>Manages the reporting of broken links.</para></listitem></varlistentry><varlistentry><term>nuke_downloads_newdownload<indexterm><primary>nuke_downloads_newdownload</primary></indexterm>:
</term><listitem><para>Manages the insertion of files from third parties.</para></listitem></varlistentry><varlistentry><term>nuke_downloads_moddata<indexterm><primary>nuke_downloads_moddata</primary></indexterm>:
</term><listitem><para>Manages voting on files.</para></listitem></varlistentry><varlistentry><term>nuke_encyclopedya<indexterm><primary>nuke_encyclopedya</primary></indexterm>:
</term><listitem><para>Lists the various encyclopedias.</para></listitem></varlistentry><varlistentry><term>nuke_encyclopedia_text<indexterm><primary>nuke_encyclopedia_text</primary></indexterm>:
</term><listitem><para>Lists encyclopedia entries.</para></listitem></varlistentry><varlistentry><term>nuke_ephem<indexterm><primary>nuke_ephem</primary></indexterm>
</term><listitem><para>Manages recurrent events.</para></listitem></varlistentry><varlistentry><term>nuke_faqanswer<indexterm><primary>nuke_faqanswer</primary></indexterm>:
</term><listitem><para>Archives the FAQ answers.</para></listitem></varlistentry><varlistentry><term>nuke_faqcategories<indexterm><primary>nuke_faqcategories</primary></indexterm>:
</term><listitem><para>Manages the categories in which the FAQ are subdivided.</para></listitem></varlistentry><varlistentry><term>nuke_forum_access<indexterm><primary>nuke_forum_access</primary></indexterm>:
</term><listitem><para>Records the last access of the users.</para></listitem></varlistentry><varlistentry><term>nuke_forum_mods<indexterm><primary>nuke_forum_mods</primary></indexterm>:
</term><listitem><para>Defines moderators of the forums.</para></listitem></varlistentry><varlistentry><term>nuke_forums<indexterm><primary>nuke_forums</primary></indexterm>:
</term><listitem><para>Defines the active forums.</para></listitem></varlistentry><varlistentry><term>nuke_forumtopics<indexterm><primary>nuke_forumtopics</primary></indexterm>:
</term><listitem><para>Defines forum topics.</para></listitem></varlistentry><varlistentry><term>nuke_headlines<indexterm><primary>nuke_headlines</primary></indexterm>:
</term><listitem><para>Defines the sources from which to take news with the blocks.</para></listitem></varlistentry><varlistentry><term>nuke_links_categories<indexterm><primary>nuke_links_categories</primary></indexterm>:
</term><listitem><para>Defines the categories in which the links are subdivided. </para></listitem></varlistentry><varlistentry><term>nuke_links_editorials<indexterm><primary>nuke_links_editorials</primary></indexterm>:
</term><listitem><para>Manages the judgments on the links.</para></listitem></varlistentry><varlistentry><term>nuke_links_links<indexterm><primary>nuke_links_links</primary></indexterm>:
</term><listitem><para>Archives the links.</para></listitem></varlistentry><varlistentry><term>nuke_links_modrequest<indexterm><primary>nuke_links_modrequest</primary></indexterm>:
</term><listitem><para>Archives the messages related to the link (broken link etc.).</para></listitem></varlistentry><varlistentry><term>nuke_links_newlink<indexterm><primary>nuke_links_newlink</primary></indexterm>:
</term><listitem><para>Archives links suggested for insertion.</para></listitem></varlistentry><varlistentry><term>nuke_links_votedata<indexterm><primary>nuke_links_votedata</primary></indexterm>:
</term><listitem><para>Archives link votes.</para></listitem></varlistentry><varlistentry><term>nuke_main<indexterm><primary>nuke_main</primary></indexterm>:
</term><listitem><para>Defines which is the main module that must be included in index.php.</para></listitem></varlistentry><varlistentry><term>nuke_message<indexterm><primary>nuke_message</primary></indexterm>:
</term><listitem><para>Manages the home page messages.</para></listitem></varlistentry><varlistentry><term>nuke_modules<indexterm><primary>nuke_modules</primary></indexterm>:
</term><listitem><para>Lists and manages the installed modules.</para></listitem></varlistentry><varlistentry><term>nuke_pages<indexterm><primary>nuke_pages</primary></indexterm>:</term>
<listitem><para>&nbsp;</para></listitem></varlistentry><varlistentry><term>nuke_pages_categories<indexterm><primary>nuke_pages_categories</primary></indexterm>:</term>
<listitem><para>&nbsp;</para></listitem></varlistentry><varlistentry><term>nuke_poll_check<indexterm><primary>nuke_poll_check</primary></indexterm>:
</term><listitem><para>List of the IP addresses that have voted in last 24 hours.</para></listitem></varlistentry><varlistentry><term>nuke_poll_data<indexterm><primary>nuke_poll_data</primary></indexterm>:
</term><listitem><para>List of survey answers.</para></listitem></varlistentry><varlistentry><term>nuke_poll_desc<indexterm><primary>nuke_poll_desc</primary></indexterm>:
</term><listitem><para>List of present and past surveys.</para></listitem></varlistentry><varlistentry><term>nuke_pollcomments<indexterm><primary>nuke_pollcomments</primary></indexterm>:
</term><listitem><para>Comment to the survey.</para></listitem></varlistentry><varlistentry><term>nuke_posts<indexterm><primary>nuke_posts</primary></indexterm>:
</term><listitem><para>Main titles of forum posts</para></listitem></varlistentry><varlistentry><term>nuke_posts_text<indexterm><primary>nuke_posts_text</primary></indexterm>:</term>
<listitem><para>&nbsp;</para></listitem></varlistentry><varlistentry><term>nuke_priv_msgs<indexterm><primary>nuke_priv_msgs</primary></indexterm>:
</term><listitem><para>Manages the module private messages.</para></listitem></varlistentry><varlistentry><term>nuke_queue<indexterm><primary>nuke_queue</primary></indexterm>:
</term><listitem><para>Lists the texts waiting for publication</para></listitem></varlistentry><varlistentry><term>nuke_quotes<indexterm><primary>nuke_quotes</primary></indexterm>:</term>
<listitem><para>&nbsp;</para></listitem></varlistentry><varlistentry><term>nuke_ranks<indexterm><primary>nuke_ranks</primary></indexterm>:
</term><listitem><para>Registers the votes for the news</para></listitem></varlistentry><varlistentry><term>nuke_referer<indexterm><primary>nuke_referer</primary></indexterm>:
</term><listitem><para>Lists where the last x rows come from</para></listitem></varlistentry><varlistentry><term>nuke_related<indexterm><primary>nuke_related</primary></indexterm>:
</term><listitem><para>Associates eventual links to the topics.</para></listitem></varlistentry><varlistentry><term>nuke_reviews<indexterm><primary>nuke_reviews</primary></indexterm>:</term>
<listitem><para>&nbsp;</para></listitem></varlistentry><varlistentry><term>nuke_reviews_add<indexterm><primary>nuke_reviews_add</primary></indexterm>:</term>
<listitem><para>&nbsp;</para></listitem></varlistentry><varlistentry><term>nuke_reviews_comments<indexterm><primary>nuke_reviews_comments</primary></indexterm>:
</term><listitem><para>Comments to the reviews.</para></listitem></varlistentry><varlistentry><term>nuke_reviews_main<indexterm><primary>nuke_reviews_main</primary></indexterm>:
</term><listitem><para>main table of the reviews.</para></listitem></varlistentry><varlistentry><term>nuke_seccont<indexterm><primary>nuke_seccont</primary></indexterm>:
</term><listitem><para>Lists the section texts.</para></listitem></varlistentry><varlistentry><term>nuke_sections<indexterm><primary>nuke_sections</primary></indexterm>:
</term><listitem><para>Lists the active sections.</para></listitem></varlistentry><varlistentry><term>nuke_session<indexterm><primary>nuke_session</primary></indexterm>:
</term><listitem><para>Lists the active sessions.</para></listitem></varlistentry><varlistentry><term>nuke_smiles<indexterm><primary>nuke_smiles</primary></indexterm>:
</term><listitem><para>Lists the supported emoticons.</para></listitem></varlistentry><varlistentry><term>nuke_stats_date<indexterm><primary>nuke_stats_date</primary></indexterm>:
</term><listitem><para>Statistics module.</para></listitem></varlistentry><varlistentry><term>nuke_stats_hour<indexterm><primary>nuke_stats_hour</primary></indexterm>:
</term><listitem><para>Statistics module...</para></listitem></varlistentry><varlistentry><term>nuke_stats_month<indexterm><primary>nuke_stats_month</primary></indexterm>:
</term><listitem><para>Statistics module.</para></listitem></varlistentry><varlistentry><term>nuke_stats_year<indexterm><primary>nuke_stats_year</primary></indexterm>:
</term><listitem><para>Statistics module.</para></listitem></varlistentry><varlistentry><term>nuke_stories<indexterm><primary>nuke_stories</primary></indexterm>:
</term><listitem><para>Texts of the news.</para></listitem></varlistentry><varlistentry><term>nuke_stories_cat<indexterm><primary>nuke_stories_cat</primary></indexterm>:
</term><listitem><para>Categories of the news.</para></listitem></varlistentry><varlistentry><term>nuke_topics<indexterm><primary>nuke_topics</primary></indexterm>:
</term><listitem><para>List of topics.</para></listitem></varlistentry><varlistentry><term>nuke_users<indexterm><primary>nuke_users</primary></indexterm>:
</term><listitem><para>List of users.</para></listitem></varlistentry><varlistentry><term>nuke_words<indexterm><primary>nuke_words</primary></indexterm>:
</term><listitem><para>Words to censure.</para></listitem></varlistentry></variablelist></sect1>
<sect1 id="sql-syntax"><title>The syntax of SQL code</title><para>Aiming at making PHP-Nuke compatible with more databases, the SQL syntax<indexterm><primary>syntax, SQL</primary></indexterm> has been transformed to functions, in order to achieve a standard syntax that is independent of the database used. For convenience, let us recall the file sql_layer.php in a somewhat cleaned-up version: </para><screen>
sql_connect($host, $user, $password, $db) <co id="login">
sql_logout($id) <co id="disconnect">
sql_query($query, $id) <co id="query">
sql_num_rows($res) <co id="numrows">
sql_fetch_row(&$res, $nr) <co id="fetchrows">
sql_fetch_array(&$res, $nr) <co id="fetcharray">
sql_fetch_object(&$res, $nr) <co id="fetchobject">
sql_free_result($res) <co id="freeresult">
</screen>
<calloutlist>
    <callout arearefs="login">
       <para>
       Log into the DB.
      </para>
    </callout>
    <callout arearefs="disconnect">
       <para>
         Disconnect from the DB.
       </para>
    </callout>
<callout arearefs="query">
       <para>
       Query.
       </para>
    </callout>
<callout arearefs="numrows">
       <para>
      Number of Rows.
       </para>
    </callout>
<callout arearefs="fetchrows">
       <para>
       Fetch Rows.
       </para>
    </callout>
<callout arearefs="fetcharray">
       <para>
       Fetch Array.
       </para>
    </callout>
<callout arearefs="fetchobject">
       <para>
      Fetch Object.
       </para>
    </callout>
<callout arearefs="freeresult">
       <para>
      Free Result.
       </para>
    </callout>
</calloutlist>
<para>With this syntax you will be able to render all the modifications, blocks or modules you create compatible to all the databases supported by PHP-Nuke, which are:</para><itemizedlist><listitem><para>MySQL</para></listitem><listitem><para>mSQL</para></listitem><listitem><para>PostgreSQL</para></listitem><listitem><para>PostgreSQL_local</para></listitem><listitem><para>ODBC</para></listitem><listitem><para>ODBC_Adabas</para></listitem><listitem><para>Interbase</para></listitem><listitem><para>Sybase</para></listitem></itemizedlist></sect1>
<sect1 id="phpmyadmin2"><title>PHPMyadmin, administering MySQL via web</title><sect2><title>What is PHPMyadmin<anchor id="whatis-phpmyadmin2"></title><para><ulink url="http://www.phpmyadmin.net/">PHPMyAdmin</ulink><indexterm><primary>PHPMyAdmin</primary></indexterm> is n visual system for the management of a <ulink url="http://www.mysql.org">MySQL</ulink> database. It is written in <ulink url="http://www.php.net">PHP</ulink> and serves to display the contents of the databases on the server (or client) on which MySQL is installed. Through this interface you can create new databases, modify existing ones and modify the contents of single fields (see <xref linkend="fig-myadmin1-copy">).</para><para>
<figure id="fig-myadmin1-copy">
   <title>
   PHPMyAdmin start screen
   </title>
   <mediaobject>
      <![ %output.print.png; [
      <imageobject>
         <imagedata fileref="./images/&graph1022;.png" format="PNG">
      </imageobject>
      ]]>
      <![ %output.print.pdf; [
      <imageobject>
         <imagedata fileref="&graph1022;.pdf" format="PDF" scale="65">
      </imageobject>
      ]]>
      <![ %output.print.eps; [
      <imageobject>
         <imagedata fileref="&graph1022;.eps" format="EPS">
      </imageobject>
       ]]>
      <![ %output.print.bmp; [
      <imageobject>
         <imagedata fileref="&graph1022;.bmp" format="BMP">
      </imageobject>
       ]]>
      <textobject>
         <phrase>PHPMyAdmin start screen</phrase>
      </textobject>
      <caption>
         <para>PHPMyAdmin start screen</para>
      </caption>
   </mediaobject>
</figure>
</para></sect2>
<sect2 id="install-db2"><title>How to install the PHP-Nuke DB with PHPMyadmin</title><para>Please read first <xref linkend="install-db"> for the basic installation procedure of the PHP-Nuke MySQL database through PHPMyAdmin. In this section we will discuss some more advanced PHPMyAdmin topics:</para><para>PHPMyAdmin gives you also the possibility to do a backup<indexterm><primary>backup</primary></indexterm> of the data in your database (or only of the structure). If you choose &quot;Structure Only and the &quot;Send&quot; option, you will save on your PC the database structure without the data. Choosing &quot;Structure and Data&quot; instead, you will be sent a real whole backup of your DB.</para><sect3><title>Other options of PHPMyAdmin</title><para>Yet another couple of instructions: In order to see the structure of a table, you only need to click on the one that is marked in the left bar and you will see all its fields and modification options appear in the central part (<xref linkend="fig-forum_topics">).</para><para>
<figure id="fig-forum_topics">
   <title>
   PHPMyAdmin: table forum_topics
   </title>
   <mediaobject>
      <![ %output.print.png; [
      <imageobject>
         <imagedata fileref="./images/&graph1023;.png" format="PNG">
      </imageobject>
      ]]>
      <![ %output.print.pdf; [
      <imageobject>
         <imagedata fileref="&graph1023;.pdf" format="PDF" scale="65">
      </imageobject>
      ]]>
      <![ %output.print.eps; [
      <imageobject>
         <imagedata fileref="&graph1023;.eps" format="EPS">
      </imageobject>
       ]]>
      <![ %output.print.bmp; [
      <imageobject>
         <imagedata fileref="&graph1023;.bmp" format="BMP">
      </imageobject>
       ]]>
      <textobject>
         <phrase>PHPMyAdmin: table forum_topics</phrase>
      </textobject>
      <caption>
         <para>PHPMyAdmin: table forum_topics</para>
      </caption>
   </mediaobject>
</figure>
</para><caution>
<title>
ATTENTION! 
</title>
<para>
The DROP command eliminates all the contents of the DB, the table or the single field, use it  with caution.
</para>
</caution>
<para>Generally, the management interface of PHPMyAdmin is supplied by the provider who sells you the hosting or, if you install it on Windows in order to work locally, does not need any particular tweaking in its configuration.</para><para>In case you want to install it on Windows in order to read databases that are online or to install it on your webspace because your hosting supplier does not include it in your tools, you can configure everything by editing the config.inc.php file as follows:</para><para>Supposing that:</para><itemizedlist><listitem><para>IP DB Server: 156.123.22.34</para></listitem><listitem><para>User: Pippo</para></listitem><listitem><para>Password: Topolino</para></listitem><listitem><para>Database Name: Minnie</para></listitem></itemizedlist><para>Then:</para><screen><![CDATA[$cfgServers[1]["host"] = "156.123.22.34"; // MySQL hostname
]]><![CDATA[$cfgServers[1]["port"] = ""; // MySQL port - leave blank for default port
]]><![CDATA[$cfgServers[1]["adv_auth"] = false; // Use advanced authentication?
]]><![CDATA[$cfgServers[1]["stduser"] = ""; // MySQL standard user (only needed with advanced auth)
]]><![CDATA[$cfgServers[1]["stdpass"] = ""; // MySQL standard password (only needed with advanced auth)
]]><![CDATA[$cfgServers[1]["user"] = "Pippo"; // MySQL user (only needed with basic auth)
]]><![CDATA[$cfgServers[1]["password"] = "Topolino"; // MySQL password (only needed with basic auth)
]]><![CDATA[$cfgServers[1]["only_db"] = "Minnie"; // If set to a db-name, only this db is accessible
]]><![CDATA[$cfgServers[1]["verbose"] = ""; // Verbose name for this host - leave blank to show the hostname
]]><![CDATA[$cfgServers[1]["bookmarkdb"] = ""; // Bookmark db - leave blank for no bookmark support
]]><![CDATA[$cfgServers[1]["bookmarktable"] = ""; // Bookmark table - leave blank for no bookmark support
]]><![CDATA[
]]></screen><para>In the config.inc.php you will find more configuration parameters that are repeated. They serve to manage DBs in various hosts with the same interface.</para></sect3>
</sect2>
</sect1>
<sect1 id="mysql-frontend"><title>MySQL Front, how to administer a MySQL DB from Windows </title><para>Mysql Front<indexterm><primary>MySQL Front</primary></indexterm> is a client for Windows<indexterm><primary>Windows</primary></indexterm> that allows for the management to manage a local or remote DB through a client interface. Since we consider PHP-Nuke to be more aproppriate and flexible tool for this task, we would like to focus our attention a little on a functionality of MySQLFront that on PHPMyAdmin has shown itself to be little reliable. That is the ability to load, import and export DBs of great dimensions without losing data or getting errors.</para><para>In this section we will limit ourselves in analyzing the connection phase, the import and upload.</para><para>Connection (<xref linkend="fig-mysqlfront-connection">): Clicking on File&lyxarrow;Connection, we will get an interface in which we are asked to enter the host, user and password. If we have to use MySQLFront locally, we will leave the localhost entry untouched. </para><para>
<figure id="fig-mysqlfront-connection">
   <title>
   MySQL Front: Connection
   </title>
   <mediaobject>
      <![ %output.print.png; [
      <imageobject>
         <imagedata fileref="./images/&graph1024;.png" format="PNG">
      </imageobject>
      ]]>
      <![ %output.print.pdf; [
      <imageobject>
         <imagedata fileref="&graph1024;.pdf" format="PDF" scale="65">
      </imageobject>
      ]]>
      <![ %output.print.eps; [
      <imageobject>
         <imagedata fileref="&graph1024;.eps" format="EPS">
      </imageobject>
       ]]>
      <![ %output.print.bmp; [
      <imageobject>
         <imagedata fileref="&graph1024;.bmp" format="BMP">
      </imageobject>
       ]]>
      <textobject>
         <phrase>MySQL Front: Connection</phrase>
      </textobject>
      <caption>
         <para>MySQL Front: Connection</para>
      </caption>
   </mediaobject>
</figure>
</para><para>Download (or copy) of an existing DB: choose the database you wish to be exported and then click on &quot;Export Tables&quot; (fifth from the right, <xref linkend="fig-mysqlfront-export-tables">). Then choose a destination path for the database dump. As you may notice, the system, through the use of flags, gives us even the possibility to choose individually those tables we want to import.</para><para>
<figure id="fig-mysqlfront-export-tables">
   <title>
   MySQL Front: export tables
   </title>
   <mediaobject>
      <![ %output.print.png; [
      <imageobject>
         <imagedata fileref="./images/&graph1025;.png" format="PNG">
      </imageobject>
      ]]>
      <![ %output.print.pdf; [
      <imageobject>
         <imagedata fileref="&graph1025;.pdf" format="PDF" scale="65">
      </imageobject>
      ]]>
      <![ %output.print.eps; [
      <imageobject>
         <imagedata fileref="&graph1025;.eps" format="EPS">
      </imageobject>
       ]]>
      <![ %output.print.bmp; [
      <imageobject>
         <imagedata fileref="&graph1025;.bmp" format="BMP">
      </imageobject>
       ]]>
      <textobject>
         <phrase>MySQL Front: export tables</phrase>
      </textobject>
      <caption>
         <para>MySQL Front: export tables</para>
      </caption>
   </mediaobject>
</figure>
</para><para>Upload of a DB: clicking on the SQL Query button (<xref linkend="fig-mysqlfront-SQL-query">), an interface appears that allows us to carry out the upload of an existing database. It suffices to click on the symbol of the open folder, choose the database dump and click on the button that looks&quot;Play&quot;-like button. Before starting this operation will have to select the destination database.</para><para>
<figure id="fig-mysqlfront-SQL-query">
   <title>
   MySQL Front: SQL Query
   </title>
   <mediaobject>
      <![ %output.print.png; [
      <imageobject>
         <imagedata fileref="./images/&graph1026;.png" format="PNG">
      </imageobject>
      ]]>
      <![ %output.print.pdf; [
      <imageobject>
         <imagedata fileref="&graph1026;.pdf" format="PDF" scale="65">
      </imageobject>
      ]]>
      <![ %output.print.eps; [
      <imageobject>
         <imagedata fileref="&graph1026;.eps" format="EPS">
      </imageobject>
       ]]>
      <![ %output.print.bmp; [
      <imageobject>
         <imagedata fileref="&graph1026;.bmp" format="BMP">
      </imageobject>
       ]]>
      <textobject>
         <phrase>MySQL Front: SQL Query</phrase>
      </textobject>
      <caption>
         <para>MySQL Front: SQL Query</para>
      </caption>
   </mediaobject>
</figure>
</para></sect1>
<sect1 id="foxserv"><title>Foxserv, making PHP-Nuke work on Windows Systems</title><para>There exists an application that installs PHP + MySQL + Apache in a simple and fast way, configuring your operating system to emulate a local Web server. This is very useful, as it allows us to experiment with PHP-Nuke and our modifications locally. </para><para>The software is called Foxserv<indexterm><primary>Foxserv</primary></indexterm>, has reached version 3.0, but I recommend using version 2.0 which is much easier to use.</para><para>The installation is very simple, it is enough to launch the FoxServ-2.0core.exe file, proceed with the installation inserting any data (nothing is needed besides user and password of the DB) and then start using it!</para><para>When launching the foxserv control panel, you will have to activate apache and mysql, type in your browser the address http://localhost/and the web page will appear as if it were on any Internet server.</para><para>Suppose that you have installed everything in c:\foxserv. The PHP folders have to be inserted under the folder www. For example if we want to insert a nuke56 installation, we create the folder c:\foxserv\www\nuke56\ and load there all the content of the HTML folder of our PHP-Nuke (in the config.php of PHP-Nuke we will leave &quot;localhost&quot; as our host, &quot;root&quot; as user and nothing as password).</para><para>In order to reach PHPMyAdmin (even this is preinstalled), the address will be http://localhost/phpmyadmin/.</para><important>
<title>
Important note
</title>
<para>
The file php.ini (which is located, depending on the operating system, in c:\windows, c:\windows\system, c:\winnt or c:\winnt\system\) contains paths to a  disc f:
</para>
</important>
<para>The only modification that you will have to make consists in:</para><itemizedlist><listitem><para>create a folder c:&bsol;temp</para></listitem><listitem><para>modify the parameter: session.save_path = c:&bsol;temp. It must be c:&bsol;temp and not f:&bsol;foxserv etc.</para></listitem></itemizedlist><caution>
<title>
Attention
</title>
<para>
The folder &quot;php&quot; contains also a php.ini, but it is not the file that interests us.
</para>
</caution>
</sect1>
</chapter>


&index;
</book>
